var AssetAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var basic;!function(t){var e;!function(e){var i=function(){function t(){}var e=(__define,t);e.prototype;return t.centerPopUp=function(t){t.horizontalCenter=t.verticalCenter=0},t.centerHorizontal=function(t){t.horizontalCenter=0},t.centerVertical=function(t){t.verticalCenter=0},t.notCenterPopUp=function(t){t.horizontalCenter=t.verticalCenter=0/0},t.getCenterPos=function(t){var e=0,i=0,n=t.parent;return n&&(e=.5*(n.width-t.width),i=.5*(n.height-t.height)),{x:e,y:i}},t.transDirection=function(t){var e;switch(t){case"up":e=0;break;case"right":e=1;break;case"bottom":e=2;break;case"left":e=3}return e},t}();e.Utils=i,egret.registerClass(i,"basic.dialogEffect.Utils");var n=function(){function t(){}var e=(__define,t),n=e.prototype;return n.show=function(t,e,n,a,s){e.addChild(t),i.centerPopUp(t)},n.hide=function(t,e,i,n,a){e.removeChild(t)},t}();e.None=n,egret.registerClass(n,"basic.dialogEffect.None",["basic.dialogEffect.IDialogEffect"]);var a=function(){function t(){}var e=(__define,t),n=e.prototype;return n.show=function(e,n,a,s,o){e.alpha=0,n.addChild(e),i.centerPopUp(e);var r=o&&o.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:1},r)},n.hide=function(e,i,n,a,s){var o=s&&s.duration||t.DEFAULT_DURATION;egret.Tween.get(e).to({alpha:0},o).call(function(){i.removeChild(e)},this)},t.DEFAULT_DURATION=200,t}();e.Fade=a,egret.registerClass(a,"basic.dialogEffect.Fade",["basic.dialogEffect.IDialogEffect"]);var s=function(){function e(){}var n=(__define,e),a=n.prototype;return a.show=function(n,a,s,o,r){e.outPos||(e.outPos=[[0,-t.StageProxy.height],[t.StageProxy.width,0],[0,t.StageProxy.height],[-t.StageProxy.width,0]]),a.addChild(n),i.notCenterPopUp(n),a.width=t.StageProxy.width;var h=e.outPos[i.transDirection(r.direction)],c=i.getCenterPos(n);n.x=0==h[0]?c.x:h[0],n.y=0==h[1]?c.y:h[1];var u=r&&r.duration||e.DEFAULT_DURATION,d={x:c.x,y:c.y};egret.Tween.get(n).to(d,u,r?r.ease:null),r&&r.withFade&&egret.Tween.get(n).to({alpha:1},u)},a.hide=function(t,n,a,s,o){var r=e.outPos[i.transDirection(o.direction)],h=o&&o.duration||e.DEFAULT_DURATION,c=i.getCenterPos(t),u={x:0==r[0]?c.x:r[0],y:0==r[1]?c.y:r[1]};egret.Tween.get(t).to(u,h,o?o.ease:null).call(function(){n.removeChild(t),i.centerPopUp(t)},this),o&&o.withFade&&egret.Tween.get(t).to({alpha:0},h)},e.DEFAULT_DURATION=500,e}();e.Flew=s,egret.registerClass(s,"basic.dialogEffect.Flew",["basic.dialogEffect.IDialogEffect"]);var o=function(){function t(){}var e=(__define,t),n=e.prototype;return n.show=function(e,n,a,s,o){var r=o&&o.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=0;var h={scaleX:1,scaleY:1};n.addChild(e),i.centerPopUp(e),egret.Tween.get(e).to(h,r,o?o.ease:null),o&&o.withFade&&egret.Tween.get(e).to({alpha:1},r)},n.hide=function(e,i,n,a,s){var o=s&&s.duration||t.DEFAULT_DURATION;e.scaleX=e.scaleY=1;var r={scaleX:0,scaleY:0};egret.Tween.get(e).to(r,o,s?s.ease:null).call(function(){i.removeChild(e),e.scaleX=e.scaleY=1},this),s&&s.withFade&&egret.Tween.get(e).to({alpha:0},o)},t.DEFAULT_DURATION=200,t}();e.Scale=o,egret.registerClass(o,"basic.dialogEffect.Scale",["basic.dialogEffect.IDialogEffect"])}(e=t.dialogEffect||(t.dialogEffect={}))}(basic||(basic={}));var basic;!function(t){var e=function(e){function i(i,n,a,s,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=!0),e.call(this),this._excludeActionsClose=[],this.showEffect=i||t.dialogEffect.None,this.showEffectParams=n,this.closeEffect=a||t.dialogEffect.None,this.closeEffectParams=s,this.popupShowBanner=o,this.init()}__extends(i,e);var n=(__define,i),a=n.prototype;return a.init=function(){},a.addExcludeForClose=function(t){this._excludeActionsClose=this._excludeActionsClose.concat(t)},a.dealAction=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this._callback&&this._callback(t||"close",e),this._excludeActionsClose.indexOf(t)<0&&this.close()},a.popup=function(e,i){void 0===e&&(e=null),void 0===i&&(i=!0),t.PopUpManager.addPopUp(this,this.showEffect,this.showEffectParams,e,i)},a.close=function(){t.PopUpManager.removePopUp(this,this.closeEffect,this.closeEffectParams)},i}(eui.Component);t.PanelBase=e,egret.registerClass(e,"basic.PanelBase")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){this._pupUpStack=[],this._popLayer=t.SceneManager.instance.popLayer}var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==e._instance&&(e._instance=new e),e._instance}),e.addPopUp=function(t,i,n,a,s){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!0),e.instance.addPopUp(t,i,n,a,s)},e.removePopUp=function(t,i,n){void 0===i&&(i=null),void 0===n&&(n=null),e.instance.removePopUp(t,i,n)},a.addPopUp=function(t,e,i,n,a){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=!0),!t.parent){this._pupUpStack.unshift({target:t,modalTouchFun:n,modal:a}),this.updateModalMask(this._pupUpStack[0]);var s=this.createEffectInstance(e);s.show(t,this._popLayer,function(){},this,i)}},a.removePopUp=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),t.parent){this.getInStack(t,!0);var n;this._pupUpStack.some(function(t){return t.modal?(n=t,!0):void 0}),n?this.updateModalMask(n):this.setModalMaskVisible(!1);var a=this.createEffectInstance(e);a.hide(t,this._popLayer,function(){},this,i)}},a.removeTopPupUp=function(){if(this._popLayer.numChildren>0){var t=this._popLayer.getChildAt(this._popLayer.numChildren-1);return t.close(),!0}return!1},a.getInStack=function(t,e){void 0===e&&(e=!1);var i;return this._pupUpStack.some(function(e,n){return e.target==t?(i={item:e,index:n},!0):void 0}),i&&e&&this._pupUpStack.splice(i.index,1),i},a.createEffectInstance=function(e){void 0===e&&(e=null);var i;return i=e?new e:new t.dialogEffect.None},a.onModalMaskTap=function(t){var e=this._pupUpStack[0];e&&e.modal&&e.modalTouchFun&&e.modalTouchFun()},a.updateModalMask=function(t){var e=this._popLayer.getChildIndex(this._modalMask),i=this._popLayer.getChildIndex(t.target);e!=i-1&&this.setModalMaskVisible(!0,i)},a.setModalMaskVisible=function(t,i){void 0===i&&(i=-1),t?(this.modalMask.fillColor=e.modalMaskColor,this.modalMask.fillAlpha=e.modalMaskAlpha,this.modalMask.alpha=0,0==e.modalMaskIsShow?this.modalMask.visible=!1:this.modalMask.visible=!0,i>=0?(this.setModalMaskVisible(!0),this._popLayer.addChildAt(this.modalMask,i)):this._popLayer.addChild(this.modalMask),egret.Tween.get(this.modalMask).to({alpha:1},e.modalMaskDuration)):this.modalMask.parent&&egret.Tween.get(this.modalMask).to({alpha:0},e.modalMaskDuration).call(function(t){this._popLayer.removeChild(t)},this,[this.modalMask])},i(a,"modalMask",function(){return this._modalMask||(this._modalMask=new eui.Rect,this._modalMask.width=t.StageProxy.width,this._modalMask.height=t.StageProxy.height,this._modalMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onModalMaskTap,this)),this._modalMask}),e.modalMaskColor=0,e.modalMaskAlpha=.6,e.modalMaskDuration=200,e.modalMaskIsShow=!0,e}();t.PopUpManager=e,egret.registerClass(e,"basic.PopUpManager")}(basic||(basic={}));var basic;!function(t){var e=function(e){function i(){e.call(this),this.touchChildren=!0,this.touchEnabled=!1,this.width=t.StageProxy.stage.stageWidth,this.height=t.StageProxy.stage.stageHeight}__extends(i,e);var n=(__define,i),a=n.prototype;return a._beforeShow=function(t){void 0===t&&(t=null),this.beforeShow(t)},a._beforeHide=function(t){void 0===t&&(t=null),this.beforeHide(t)},a._onShow=function(t){void 0===t&&(t=null),this.onShow(t)},a._onHide=function(t){void 0===t&&(t=null),this.onHide(t)},a.beforeShow=function(t){void 0===t&&(t=null)},a.beforeHide=function(t){void 0===t&&(t=null)},a.onShow=function(t){void 0===t&&(t=null)},a.onHide=function(t){void 0===t&&(t=null)},i}(eui.Component);t.SceneBase=e,egret.registerClass(e,"basic.SceneBase")}(basic||(basic={}));var basic;!function(t){var e;!function(t){var e=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,n){void 0===n&&(n=null),t&&(t.visible=!1,i.removeChild(t)),e.alpha=1,e.visible=!0,i.addChild(e),n&&n()},t}();t.None=e,egret.registerClass(e,"basic.sceneEffect.None",["basic.sceneEffect.ISceneEffect"]);var i=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,n){void 0===n&&(n=null),egret.Tween.get(t).to({alpha:0},500),e.alpha=0,e.visible=!0,i.addChild(e),egret.Tween.get(e).to({alpha:1},500).call(function(){i.removeChild(t),n&&n()})},t}();t.Fade=i,egret.registerClass(i,"basic.sceneEffect.Fade",["basic.sceneEffect.ISceneEffect"]);var n=function(){function t(){}var e=(__define,t),i=e.prototype;return i.handover=function(t,e,i,n){function a(){egret.Tween.get(e).to({alpha:1},500).call(function(){n&&n()},this)}void 0===n&&(n=null),e.alpha=0,e.visible=!0,i.addChild(e),t?egret.Tween.get(t).to({alpha:0},500).call(function(){i.removeChild(t),a()},this):a()},t}();t.FadeBlack=n,egret.registerClass(n,"basic.sceneEffect.FadeBlack",["basic.sceneEffect.ISceneEffect"])}(e=t.sceneEffect||(t.sceneEffect={}))}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){this.topScene=null,this.mapScene=new t.HashMap,this.mapSceneDef=new t.HashMap,this.mapTopScene=new t.HashMap}var n=__define,a=e,s=a.prototype;return n(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),e.init=function(t){e.instance.init(t)},e.addTopScene=function(t){e.instance.addTopScene(t)},e.removeTopScene=function(t){e.instance.removeTopScene(t)},e.addBottomScene=function(t,i){e.instance.addBottomScene(t,i)},e.register=function(t,i,n){void 0===n&&(n=null),e.instance.register(t,i,n)},e.show=function(t,i,n,a,s,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!1),void 0===o&&(o=null),e.instance.show(t,i,n,a,s,o)},e.back=function(t,i,n){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),e.instance.back(t,i,n)},s.init=function(t){this.root=t,this.root.addChild(this.bottomLayer=new eui.Group),this.root.addChild(this.middleLayer=new eui.Group),this.root.addChild(this.topLayer=new eui.Group),this.root.addChild(this.popLayer=new eui.Group),this.bottomLayer.touchEnabled=!1,this.middleLayer.touchEnabled=!1,this.topLayer.touchEnabled=!1,this.popLayer.touchEnabled=!1},s.addTopScene=function(t){if(this.mapTopScene.containsKey(t))this.mapTopScene.get(t)._beforeShow(null),this.mapTopScene.get(t).visible=!0,this.topLayer.setChildIndex(this.mapTopScene.get(t),this.topLayer.numChildren-1);else{var e,i=this.mapSceneDef.get(t),n=i.sceneDef;e=new n,this.mapTopScene.put(t,e),this.mapTopScene.get(t)._beforeShow(null),this.topLayer.addChild(this.mapTopScene.get(t))}},s.removeTopScene=function(t){this.mapTopScene.containsKey(t)&&(this.mapTopScene.get(t)._beforeHide(null),this.mapTopScene.get(t).visible=!1)},s.addBottomScene=function(t,e){var i=new e;this.bottomLayer.addChild(i),i._beforeShow(null)},s.register=function(t,e,n){void 0===n&&(n=null),this.mapSceneDef.put(t,new i(e,n))},s.show=function(e,i,n,a,s,o){if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=!1),void 0===o&&(o=null),this.currentSceneName!=e){var r,h;if(this.mapScene.containsKey(e))h=this.mapScene.get(e);else{var c=this.mapSceneDef.get(e),u=c.sceneDef;h=new u,this.mapScene.put(e,h)}!r&&this.currentSceneName?(r=n?new n:new t.sceneEffect.None,this.currentScene._beforeHide(i)):r=new t.sceneEffect.FadeBlack,h.touchChildren=!1,r.handover(this.currentScene,h,this.middleLayer,function(t,e){t&&t._onHide(i),e.touchChildren=!0,e._onShow(i),a&&a()}.bind(this,this.currentScene,h)),this.currentScene=h,this.currentSceneName=e,s?this.lastSceneName=e:(this.currentScene.lastSceneName=null!=o?o:this.lastSceneName,this.lastSceneName=e),this.currentScene._beforeShow(i)}},s.back=function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),this.currentScene.lastSceneName&&""!=this.currentScene.lastSceneName?(this.show(this.currentScene.lastSceneName,t,e,i,!0),!0):!1},e}();t.SceneManager=e,egret.registerClass(e,"basic.SceneManager");var i=function(){function t(t,e){void 0===e&&(e=null),this.sceneDef=t,this.resPack=e}var e=(__define,t);e.prototype;return t}();t.SceneConfig=i,egret.registerClass(i,"basic.SceneConfig");var n=function(){function t(t,e,i,n,a){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=!1),this.params=null,this.effectDef=null,this.callback=null,this.back=null,this.name=t,this.params=e,this.effectDef=i,this.callback=n,this.back=a}var e=(__define,t);e.prototype;return t}();t.ShowEntity=n,egret.registerClass(n,"basic.ShowEntity")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(){t.eventDispatcher=new egret.EventDispatcher},t.dispatch=function(e,i){void 0===i&&(i=null),i?t.eventDispatcher.dispatchEventWith(e,!1,i):t.eventDispatcher.dispatchEvent(new egret.Event(e))},t.addListener=function(e,i,n){t.eventDispatcher.addEventListener(e,i,n)},t.removeListener=function(e,i,n){t.eventDispatcher.removeEventListener(e,i,n)},t}();t.Dispatcher=e,egret.registerClass(e,"basic.Dispatcher")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(t){this.ID=t},t.getItem=function(t){return egret.localStorage.getItem(this.ID&&""!=this.ID?this.ID+"_"+t:t)},t.setItem=function(t,e){return egret.localStorage.setItem(this.ID&&""!=this.ID?this.ID+"_"+t:t,e)},t.getItemObj=function(t,e){void 0===e&&(e=null);var i;try{i=JSON.parse(this.getItem(t))}catch(n){}return i||(i=e),i},t.setItemObj=function(t,e){return this.setItem(t,JSON.stringify(e))},t}();t.localStorage=e,egret.registerClass(e,"basic.localStorage")}(basic||(basic={}));var basic;!function(t){var e=function(t){function e(){t.call(this),egret.ExternalInterface.addCallback("egretCall",this.egretCall.bind(this))}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),e.call=function(t,e){void 0===e&&(e=null),this.instance.call(t,e)},i(a,"isNative",function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE}),a.egretCall=function(t){var e=JSON.parse(t),i=e.method;this.dispatchEventWith(i,!1,e)},a.call=function(t,e){void 0===e&&(e=null),e=e||{},e.method=t,egret.ExternalInterface.call("nativeCall",JSON.stringify(e))},a.navigateToUrl=function(t){this.isNative?this.call("navigateToUrl",{url:t}):location.href=t},a.closeApp=function(){this.call("closeApp")},a.showBanner=function(){this.isNative&&this.call("showBanner")},a.hideBanner=function(){this.isNative&&this.call("hideBanner")},a.showInterstitial=function(){this.isNative&&this.call("showInterstitial")},a.jumpApp=function(t){this.isNative?this.call("jumpApp",t):this.navigateToUrl(t.android_apk_url)},a.openAppMarket=function(){this.isNative&&this.call("openAppMarket",{})},a.share=function(t,e,i,n,a){this.isNative&&this.call("share",{title:t,name:e,description:i,picture:n,link:a})},a.shareSystem=function(t,e,i){this.isNative?this.call("shareSystem",{title:t,description:e}):this.share(t,"",e,"",i)},a.sendEvent=function(t,e){this.isNative&&this.call("sendEvent",{eventId:t,params:e})},e}(egret.EventDispatcher);t.Native=e,egret.registerClass(e,"basic.Native")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(){}var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.playMusic=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=1),t&&(this.musicRes=t),!this.musicMute){this.stopMusic();var i=RES.getRes(this.musicRes);this.musicChannel=i.play(0,e),this.musicChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this)}},a.onMusicComplete=function(t){this.stopMusic()},a.stopMusic=function(){this.musicChannel&&(this.musicChannel.stop(),this.musicChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onMusicComplete,this),this.musicChannel=null)},a.switchMusic=function(){this.musicMute=!this.musicMute,this.musicRes&&(this.musicMute?this.stopMusic():this.playMusic())},i(a,"musicMute",function(){var e=t.localStorage.getItem("musicMute");return e?"1"==e:!1},function(e){t.localStorage.setItem("musicMute",e?"1":"0")}),a.playEffect=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=1),void 0===i&&(i=null),t&&(this.effectRes=t,this.effectCallBack=i),!this.effectMute){this.stopEffect();var n=RES.getRes(this.effectRes);this.effectChannel=n.play(0,e),this.effectChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onEffectComplete,this)}},a.playEffectForce=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=1),void 0===i&&(i=null),t&&(this.effectForceRes=t,this.effectForceCallBack=i),!this.effectMute){var n=RES.getRes(this.effectForceRes);this.effectForceChannel=n.play(0,e),this.effectForceChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onEffectForceComplete,this)}},a.onEffectComplete=function(t){this.stopEffect(),this.effectCallBack&&this.effectCallBack()},a.onEffectForceComplete=function(t){this.stopForceEffect(),this.effectForceCallBack&&this.effectForceCallBack()},a.stopEffect=function(){this.effectChannel&&(this.effectChannel.stop(),this.effectChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onEffectComplete,this),this.effectChannel=null)},a.stopForceEffect=function(){this.effectForceChannel&&(this.effectForceChannel.stop(),this.effectForceChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onEffectForceComplete,this),this.effectForceChannel=null)},a.switchEffect=function(){this.effectMute=!this.effectMute},i(a,"effectMute",function(){var e=t.localStorage.getItem("effectMute");return e?"1"==e:!1},function(e){t.localStorage.setItem("effectMute",e?"1":"0")}),a.switchAll=function(){this.switchEffect(),this.switchMusic()},e}();t.SoundManager=e,egret.registerClass(e,"basic.SoundManager")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=__define,i=t;i.prototype;return t.init=function(t,e){this.stage=t,this.root=e},e(t,"width",function(){return this.stage.stageWidth}),e(t,"height",function(){return this.stage.stageHeight}),t}();t.StageProxy=e,egret.registerClass(e,"basic.StageProxy")}(basic||(basic={}));var basic;!function(t){var e=function(){function e(t,e){void 0===e&&(e=0),this._now_repeat=0,this._delay=t,this._repeat=e,this._start_time=egret.getTimer(),this._timer=null,this._obj=null,this._onTimer=null,this._onTimerComplete=null}var i=(__define,e),n=i.prototype;return n.addEventListener=function(e,i,n){this._obj=n,e==t.TimerEvent.TIMER?this._onTimer=i.bind(n):e==t.TimerEvent.TIMER_COMPLETE&&(this._onTimerComplete=i.bind(n))},n.removeEventListener=function(e,i,n){e==t.TimerEvent.TIMER?this._onTimer=null:e==t.TimerEvent.TIMER_COMPLETE&&(this._onTimerComplete=null)},n.start=function(){this._timer=new egret.Timer(Math.floor(this._delay/10)),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer.bind(this),this._obj),this._timer.start()},n.stop=function(){this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer.bind(this),this._obj),this._timer=null),this._obj=null},n.onTimer=function(e){var i;if(this._now_time=egret.getTimer()-this._start_time,i=Math.floor(this._now_time/this._delay),this._onTimer&&i!=this._now_repeat&&this._onTimer(t.TimerEvent),this._now_repeat=i,this._now_repeat>=this._repeat&&0!=this._repeat){try{this._timer&&(this._timer.stop(),this._timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this._obj),this._timer=null)}catch(n){}this._onTimerComplete&&this._onTimerComplete(t.TimerEvent)}},e}();t.Timer=e,egret.registerClass(e,"basic.Timer")}(basic||(basic={}));var basic;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e);i.prototype;return e.TIMER="timer",e.TIMER_COMPLETE="timer_complete",e}(egret.Event);t.TimerEvent=e,egret.registerClass(e,"basic.TimerEvent")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){this.clear()}var e=__define,i=t,n=i.prototype;return n.containsKey=function(t){return t in this.obj},n.containsValue=function(t){for(var e in this.obj)if(this.obj[e]==t)return!0;return!1},n.put=function(t,e){this.containsKey(t)||(this.obj[t]=e,this._length++)},n.get=function(t){return this.containsKey(t)?this.obj[t]:null},n.remove=function(t){if(this.containsKey(t)){var e=this.obj;return delete this.obj[t],this._length--,e}return null},n.foreach=function(t,e){for(var i in this.obj)if(!t.call(e,i,this.obj[i]))break},n.randomGet=function(){var t=this.valueSet;return t[Math.floor(Math.random()*t.length)]},e(n,"keySet",function(){var t=[];for(var e in this.obj)t.push(e);return t}),e(n,"valueSet",function(){var t=[];for(var e in this.obj)t.push(this.obj[e]);return t}),e(n,"size",function(){return this._length}),n.clear=function(){this._length=0,this.obj={}},t}();t.HashMap=e,egret.registerClass(e,"basic.HashMap")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.distancePoint=function(t,e){return this.distance(t.x,t.y,e.x,e.y)},t.distance=function(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))},t.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},t.makeRandomInt=function(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e))+e},t.makeRandomFloat=function(t,e){return void 0===e&&(e=0),Math.random()*(t-e)+e},t.makeRandomByRange=function(t,e){return t+(Math.random()*e*2-e)},t.makeOrderIntArray=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=1);for(var n=[],a=e;t>=a;a+=i)n.push(a);return n},t.mixArray=function(t){for(var e=0,i=Math.round(t.length/2);i>e;e++){var n=this.makeRandomInt(t.length),a=this.makeRandomInt(t.length),s=t[n];t[n]=t[a],t[a]=s}return t},t.mixArray2=function(t){for(var e,i,n=t[0].length,a=t.length,s=0,o=Math.round(n*a/2);o>s;s++){e=[this.makeRandomInt(n),this.makeRandomInt(a)],i=[this.makeRandomInt(n),this.makeRandomInt(a)];var r=t[e[0]][e[1]];t[e[0]][e[1]]=t[i[0]][i[1]],t[i[0]][i[1]]=r}return t},t.getRandomFromArray=function(t){return t[this.makeRandomInt(t.length)]},t.fixRange=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.roundFix=function(t,e,i){return void 0===i&&(i=0),i>t?t+=e-i:t>=e&&(t-=e-i),t},t.radiusToAngle=function(t){return 180*t/Math.PI},t.angleToRadius=function(t){return t*Math.PI/180},t.turnRight=function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push([]);for(var a=0,s=t.length;s>a;a++)for(var o=0,r=t[a].length;r>o;o++)e[a][o]=t[r-o-1][a];return e},t.turnLeft=function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push([]);for(var a=0,s=t.length;s>a;a++)for(var o=0,r=t[a].length;r>o;o++)e[a][o]=t[o][r-a-1];return e},t.calDir=function(t,e,i,n){if(t==i&&e==n)return-1;var a,s=Math.atan2(n-e,i-t);return a=Math.abs(s)<Math.PI/4?0:Math.abs(s)>Math.PI/4*3?2:s>0?1:3},t.sign=function(t){return 0==t?0:t>0?1:-1},t}();t.MathUtils=e,egret.registerClass(e,"basic.MathUtils")}(basic||(basic={}));var basic;!function(t){var e=function(){function t(){}var e=(__define,t);e.prototype;return t.injectProp=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=!0),!e)return!1;var n=!0;for(var a in e){var s=e[a];i&&"function"==typeof s||(t[a]=s)}return n},t.clone=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0);var n=e?new e:{};return this.injectProp(n,t,i),n},t.arrToIntArr=function(t){for(var e=0,i=t.length;i>e;e++)t[e]=parseInt(t[e]);return t},t.getUrlParams=function(){var t={},e=window.location.href,i=e.indexOf("?");if(0>i)return t;for(var n=e.substr(i+1).split("&"),a=0;a<n.length;a++){var s=n[a].split("=");t[s[0]]=s[1]}return t},t.getUrlBase=function(){var t=window.location.href,e=t.indexOf("?");return t.substring(0,0>e?t.length:e)},t.anchorCenter=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.anchorRate(t,.5,.5,e,i)},t.anchorRate=function(t,e,i,n,a){void 0===n&&(n=0),void 0===a&&(a=0),0==n&&(n=t.width),0==a&&(a=t.height),t.x+=t.anchorOffsetX=n*e,t.y+=t.anchorOffsetY=a*i},t.obj2query=function(t){if(!t)return"";var e=[];for(var i in t)e.push(i+"="+t[i]);return e.join("&")},t}();t.Utils=e,egret.registerClass(e,"basic.Utils")}(basic||(basic={}));var Api=function(){function t(){}var e=__define,i=t,n=i.prototype;return e(t,"instance",function(){return void 0==this._instance&&(this._instance=new t),this._instance}),n.init=function(){Https.init()},n.get_account=function(t){var e={},i="/trade/sys/account/getAccount";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.get_start_list=function(t){var e={},i="/trade/sys/enroll/getDatetime";Https.getData(i,e,function(e){t(e)})},n.get_start_data=function(t){var e={},i="/trade/sys/enroll/getNearestCode";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){1==e.success&&t(e)})},n.start_signup=function(t,e){var i={},n="/trade/sys/enroll/signTrade	";i.code=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){1==t.success&&e(t)})},n.get_ranking=function(t,e){var i={},n="/trade/sys/uservalue/seniority";i.type=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.up_user_detail=function(t,e){var i={},n="/trade/sys/account/updateIntroduce";i.introduce=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_history=function(t){var e={},i="/trade/sys/account/getRecord";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.get_otherusermessage=function(t,e){var i={},n="/trade/sys/account/getOtherAccount";i.friendId=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_otheruserhistory=function(t,e){var i={},n="/trade/sys/account/getOtherRecord";i.pageNo=1,i.pageSize=20,i.friendId=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_friendsnum=function(t){var e={},i="/trade/sys/accountFriend/getCreateFriendNum";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.get_applyfriend_list=function(t){var e={},i="/trade/sys/accountFriend/getOtherCreateFriendList";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.search_forotherfriend_list=function(t){var e={},i="/trade/sys/accountFriend/queryForOtherAccount	";e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.get_friend_list=function(t,e,i){var n={},a="/trade/sys/accountFriend/getFriendList";n.pageNo=t,n.pageSize=e,n.accountId=UserData.User_Id,Https.getData(a,n,function(t){i(t)})},n.search_account=function(t,e,i,n){var a={},s="/trade/sys/accountFriend/searchAccount";a.str=t,a.pageNo=e,a.pageSize=i,a.accountId=UserData.User_Id,Https.getData(s,a,function(t){n(t)})},n.add_friend=function(t,e){var i={},n="/trade/sys/accountFriend/makeFriend";i.friendIds=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.add_friend_agree=function(t,e){var i={},n="/trade/sys/accountFriend/agreeFriend";i.friendId=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.delete_friend=function(t,e){var i={},n="/trade/sys/accountFriend/deleteFriend";i.friendId=t,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_game_data=function(t,e,i){var n={},a="/trade/sys/auction/boInfo";n.num=t,n.ktype=e,n.code=UserData.User_Code,n.accountId=UserData.User_Id,Https.getData(a,n,function(t){i(t)})},n.get_game_hudong2=function(t,e,i){var n={},a="/trade/sys/accountFriend/getOLFriendList";n.pageNo=t,n.pageSize=e,n.code=UserData.User_Code,n.accountId=UserData.User_Id,Https.getData(a,n,function(t){i(t)})},n.send_message=function(t,e,i){var n={},a="/trade/sys/accountFriend/sendAuctionMessage";n.type=t,n.message=e,n.code=UserData.User_Code,n.accountId=UserData.User_Id,Https.getData(a,n,function(t){i(t)})},n.up_game_tiaozhan=function(t,e){var i={},n="/trade/sys/accountFriend/followFriend";i.type="CHALLENGE",i.friendId=t,i.code=UserData.User_Code,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.up_game_gensui=function(t,e){var i={},n="/trade/sys/accountFriend/followFriend";i.type="FOLLOW",i.friendId=t,i.code=UserData.User_Code,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_game_gensui=function(t){var e={},i="/trade/sys/accountFriend/getFollowList";e.code=UserData.User_Code,e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.up_game_quxiaogensui=function(t,e){var i={},n="/trade/sys/accountFriend/deleteFriendRelation";i.friendId=t,i.code=UserData.User_Code,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_game_lingqutask=function(t){var e={},i="/trade/sys/auction/getHunterTask";e.code=UserData.User_Code,e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.get_game_hudongxinxi=function(t){var e={},i="/trade/sys/accountFriend/getFriendRelationList";e.code=UserData.User_Code,e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.up_game_starthudong=function(t,e,i){var n={},a="/trade/sys/accountFriend/agreeFollowFriend";n.type=t,n.friendId=e,n.code=UserData.User_Code,n.accountId=UserData.User_Id,Https.getData(a,n,function(t){i(t)})},n.up_game_nohudong=function(t,e){var i={},n="/trade/sys/accountFriend/deleteFriendRelation";i.friendId=t,i.code=UserData.User_Code,i.accountId=UserData.User_Id,Https.getData(n,i,function(t){e(t)})},n.get_game_xiadan=function(t,e,i,n){var a={},s="/trade/sys/auction/goAuction";a.price=t,a.volume=e,a.direction=i,a.code=UserData.User_Code,a.accountId=UserData.User_Id,Https.getData(s,a,function(t){n(t)})},n.get_game_chexiao=function(t){var e={},i="/trade/sys/auction/getAuctionList";e.code=UserData.User_Code,e.accountId=UserData.User_Id,Https.getData(i,e,function(e){t(e)})},n.up_game_chexiao=function(t,e){var i={},n="/trade/sys/auction/killAuction";i.id=t,Https.getData(n,i,function(t){e(t)})},n.up_zhinengcaozuo=function(t,e){var i,n={};i=1==t?"/trade/sys/auction/lightningEveningUp":"/trade/sys/auction/layoutAuction",n.code=UserData.User_Code,n.accountId=UserData.User_Id,Https.getData(i,n,function(t){e(t)})},t}();egret.registerClass(Api,"Api");var Https=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(){this.root="http://www.dae.pw"},t.getData=function(t,e,i){void 0===e&&(e=null);var n;n=this.root+t,n+="?v="+Math.random().toString(),n+="&"+basic.Utils.obj2query(e),console.log(n);var a=new egret.HttpRequest;a.responseType=egret.HttpResponseType.TEXT,a.open(n,egret.HttpMethod.POST),a.send(),a.addEventListener(egret.Event.COMPLETE,function(t){console.log(a.response);var e=JSON.parse(a.response);i(e)},this)},t}();egret.registerClass(Https,"Https");var Main=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){var e=this;t.prototype.createChildren.call(this),Api.instance.init(),GameConfig.init(!1),basic.Dispatcher.init(),basic.StageProxy.init(this.stage,this),basic.SceneManager.init(this),basic.localStorage.init(GameConfig.gameName),Api.instance.get_account(function(t){1==t.success&&(LoaderData.is_LoginEnd=!0,UserData.User_Name=t.data.nickname,UserData.User_Head=t.data.face,void 0==t.data.ulevel?UserData.User_DengJi=0:UserData.User_DengJi=t.data.ulevel,void 0==t.data.val?UserData.User_JiFen=0:UserData.User_JiFen=t.data.val,UserData.User_Detail=t.data.introduce,e.createScene())}),(egret.Capabilities.os.indexOf("Windows")>=0||egret.Capabilities.os.indexOf("Mac")>=0)&&(this.stage.orientation=egret.OrientationMode.AUTO,basic.StageProxy.width>basic.StageProxy.height?this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH);var i=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",i),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")
},n.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading")},n.onThemeLoadComplete=function(){LoaderData.is_ThemeLoadEnd=!0,1==LoaderData.is_loading_LoadEnd&&basic.SceneManager.addTopScene(SceneNames.LOADING),this.createScene()},n.onResourceLoadComplete=function(t){"loading"==t.groupName?(LoaderData.is_loading_LoadEnd=!0,this.checkShowLoading(),RES.loadGroup("startload")):"startload"==t.groupName?(LoaderData.is_start_LoadEnd=!0,this.createScene(),RES.loadGroup("otherload")):"otherload"==t.groupName&&(LoaderData.is_other_LoadEnd=!0,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this))},n.checkShowLoading=function(){basic.SceneManager.register(SceneNames.START,SceneStart),basic.SceneManager.register(SceneNames.ARENA,SceneArena),basic.SceneManager.register(SceneNames.HISTORY,SceneHistory),basic.SceneManager.register(SceneNames.HUDONG1,SceneHuDong1),basic.SceneManager.register(SceneNames.HUDONG2,SceneHuDong2),basic.SceneManager.register(SceneNames.FRIENDS,SceneFriends),basic.SceneManager.register(SceneNames.DOWNBTN,SceneDownBtn),basic.SceneManager.register(SceneNames.LOADING,SceneLoading),basic.SceneManager.register(SceneNames.PLAYRULE,ScenePlayRule),basic.SceneManager.register(SceneNames.SENDMESSAGE,SceneSendMessage),basic.SceneManager.register(SceneNames.HUDONGXINXI,SceneHuDongXinXi),LoaderData.is_ThemeLoadEnd&&basic.SceneManager.addTopScene(SceneNames.LOADING)},n.createScene=function(){LoaderData.is_ThemeLoadEnd&&LoaderData.is_start_LoadEnd&&LoaderData.is_LoginEnd&&this.startCreateScene()},n.onItemLoadError=function(t){},n.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},n.onResourceProgress=function(t){"startload"==t.groupName&&basic.Dispatcher.dispatch(EventNames.LOADING_PROGRESS,{itemsLoaded:t.itemsLoaded,itemsTotal:t.itemsTotal})},n.startCreateScene=function(){basic.SceneManager.addTopScene(SceneNames.DOWNBTN),basic.SceneManager.removeTopScene(SceneNames.LOADING),basic.SceneManager.show(SceneNames.START,null,basic.sceneEffect.Fade)},e}(eui.UILayer);egret.registerClass(Main,"Main");var EventNames=function(){function t(){}var e=(__define,t);e.prototype;return t.SHOW_START="show_start",t.SHOW_STARTTYPE="show_starttype",t.LOADING_PROGRESS="loading_progress",t.HIDE_CHOOSEBTN="hide_choosebtn",t.SHOW_CHOOSEBTN="show_choosebtn",t.SHOW_TIPS="show_tips",t.CHANGE_KLINE="change_kline",t.SHOW_ARENATIPS="show_arenatips",t.SHOW_KEYBOARD="show_keyboard",t.HIDE_KEYBOARD="hide_keyboard",t}();egret.registerClass(EventNames,"EventNames");var GameConfig=function(){function t(){}var e=(__define,t);e.prototype;return t.init=function(t){},t.gameName="ChaoGu",t}();egret.registerClass(GameConfig,"GameConfig");var GameData=function(){function t(){}var e=(__define,t);e.prototype;return t.start_list=[],t.ranking_type=0,t.chedan_list=[],t}();egret.registerClass(GameData,"GameData");var LoaderData=function(){function t(){}var e=(__define,t);e.prototype;return t.is_LoginEnd=!1,t.is_ThemeLoadEnd=!1,t.is_loading_LoadEnd=!1,t.is_start_LoadEnd=!1,t.is_other_LoadEnd=!1,t}();egret.registerClass(LoaderData,"LoaderData");var SceneNames=function(){function t(){}var e=(__define,t);e.prototype;return t.START="start",t.ARENA="arena",t.HISTORY="history",t.FRIENDS="friends",t.PLAYRULE="playrule",t.DOWNBTN="downbtn",t.LOADING="loading",t.HUDONG1="hudong1",t.HUDONG2="hudong2",t.SENDMESSAGE="sendmessage",t.HUDONGXINXI="hudongxinxi",t.CAOZUOXINXI="caozuoxinxi",t}();egret.registerClass(SceneNames,"SceneNames");var UserData=function(){function t(){}var e=(__define,t);e.prototype;return t.User_Name="",t.User_Head="",t.User_DengJi=0,t.User_JiFen=0,t.User_Detail="",t.User_Id="",t.DengJi_Name=["业余选手","职业一段","职业二段","职业三段","职业四段","职业五段","职业六段","职业七段","职业八段","职业九段"],t.TouXian_Name=["不堪一击","初窥门径","略有小成","驾轻就熟","融会贯通","炉火纯青","出类拔萃","傲视群雄","登峰造极","一代宗师"],t}();egret.registerClass(UserData,"UserData");var ThemeAdapter=function(){function t(){}var e=(__define,t),i=e.prototype;return i.getTheme=function(t,e,i,n){function a(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT)},t}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var CaoZuoXinXiFace=function(t){function e(){t.apply(this,arguments),this.num_show_height=10,this.send_type=-1,this.timer_change=null,this.now_hudongnum=0,this._tween_alpha=null}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),this.g_send.visible=!1,this.img_tips.visible=!1,this.txt_num.addEventListener(egret.Event.CHANGE,this.onNumChange,this),this.txt_price.addEventListener(egret.Event.CHANGE,this.onPriceChange,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendBtn,this),this.btn_letter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLetterBtn,this),this.btn_chedan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCheDanBtn,this),this.btn_domore.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDoMoreBtn,this),this.btn_doempty.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDoEmptyBtn,this),this.btn_num_jia.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onNumJiaBtn,this),this.btn_num_jian.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onNumJianBtn,this),this.btn_price_jia.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPriceJiaBtn,this),this.btn_price_jian.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onPriceJianBtn,this),this.btn_num_jia.addEventListener(egret.TouchEvent.TOUCH_END,this.onNumJiaBtn,this),this.btn_num_jian.addEventListener(egret.TouchEvent.TOUCH_END,this.onNumJianBtn,this),this.btn_price_jia.addEventListener(egret.TouchEvent.TOUCH_END,this.onPriceJiaBtn,this),this.btn_price_jian.addEventListener(egret.TouchEvent.TOUCH_END,this.onPriceJianBtn,this),this.btn_huifu.addEventListener(egret.TouchEvent.TOUCH_END,this.onHuiFuBtn,this),this.btn_chuli.addEventListener(egret.TouchEvent.TOUCH_END,this.onChuLiBtn,this)},n.showChat=function(t,e){var i=new ChatMessage;i.show(t,e),this.num_show_height+=i.height,this.g_detail.addChild(i),this.num_show_height>this.scroller.height&&(this.scroller.validateNow(),this.scroller.viewport.scrollV=this.scroller.viewport.contentHeight-this.scroller.viewport.height)},n.showHuDongTips=function(t){void 0!=t&&0==this.now_hudongnum&&t>0?(this.now_hudongnum=t,this.img_tips.visible=!0,this._tween_alpha=egret.Tween.get(this.img_tips,{loop:!0}).to({alpha:.1},200).to({alpha:1},200)):t>0?this.img_tips.visible=!0:this.img_tips.visible=!1},n.info=function(t,e){this.txt_num.text=e.toString(),this.txt_price.text=t.toString(),1==GameData.game_role?this.btn_chuli.label="闪电平仓":this.btn_chuli.label="一键布局"},n.onSendBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.addTopScene(SceneNames.SENDMESSAGE)},n.showSendType=function(t){this.send_type!=t&&(this.send_type=t,GameData.sendmessage_type=this.send_type,-1==this.send_type?(this.g_send.visible=!1,this.scroller.height=170):0==this.send_type?(this.g_send.visible=!0,this.scroller.height=135,this.txt_type.text="欺骗猎物",this.rect_type.fillColor=16078701):1==this.send_type?(this.g_send.visible=!0,this.scroller.height=135,this.txt_type.text="大户合谋",this.rect_type.fillColor=4832971):2==this.send_type&&(this.g_send.visible=!0,this.scroller.height=135,this.txt_type.text="团队指挥",this.rect_type.fillColor=16078701),GameData.sendmessage_title=this.txt_type.text)},n.onNumChange=function(t){"NaN"==Number(this.txt_num.text).toString()?this.txt_num.text=this.now_num.toString():this.now_num=Number(this.txt_num.text)},n.onPriceChange=function(t){"NaN"==Number(this.txt_price.text).toString()?this.txt_price.text=this.now_price.toString():this.now_price=Number(this.txt_price.text)},n.onLetterBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this._tween_alpha&&(this._tween_alpha.setPaused(!0),this._tween_alpha=null,this.img_tips.visible=!1),basic.SceneManager.addTopScene(SceneNames.HUDONGXINXI)},n.onCheDanBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelCheDan.instance.show()},n.onDoMoreBtn=function(t){Api.instance.get_game_xiadan(Number(this.txt_price.text),Number(this.txt_num.text),1,function(t){1==t.success?(basic.SoundManager.instance.playEffect("golong_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:"下单成功"})):basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:t.code})})},n.onDoEmptyBtn=function(t){Api.instance.get_game_xiadan(Number(this.txt_price.text),Number(this.txt_num.text),2,function(t){1==t.success?(basic.SoundManager.instance.playEffect("goshort_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:"下单成功"})):basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:t.code})})},n.onNumJiaBtn=function(t){this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null),t.type==egret.TouchEvent.TOUCH_BEGIN&&(basic.SoundManager.instance.playEffect("nomal_mp3"),this.txt_num.text=(Number(this.txt_num.text)+1).toString(),this.change_type=1,this.change_detail=1,this.timer_change=new basic.Timer(500,1),this.timer_change.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change.start(),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStopChange,this),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStopChange,this))},n.onNumJianBtn=function(t){this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null),t.type==egret.TouchEvent.TOUCH_BEGIN&&(basic.SoundManager.instance.playEffect("nomal_mp3"),this.txt_num.text=Math.max(0,Number(this.txt_num.text)-1).toString(),this.change_type=0,this.change_detail=1,this.timer_change=new basic.Timer(500,1),this.timer_change.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change.start(),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStopChange,this),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStopChange,this))},n.onPriceJiaBtn=function(t){this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null),t.type==egret.TouchEvent.TOUCH_BEGIN&&(basic.SoundManager.instance.playEffect("nomal_mp3"),this.txt_price.text=(Number(this.txt_price.text)+1).toString(),this.change_type=1,this.change_detail=0,this.timer_change=new basic.Timer(500,1),this.timer_change.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change.start(),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStopChange,this),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStopChange,this))},n.onPriceJianBtn=function(t){this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null),t.type==egret.TouchEvent.TOUCH_BEGIN&&(basic.SoundManager.instance.playEffect("nomal_mp3"),this.txt_price.text=Math.max(0,Number(this.txt_price.text)-1).toString(),this.change_type=0,this.change_detail=0,this.timer_change=new basic.Timer(500,1),this.timer_change.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change.start(),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStopChange,this),basic.StageProxy.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStopChange,this))},n.onTimer=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),0==this.change_detail?0==this.change_type?this.txt_price.text=Math.max(0,Number(this.txt_price.text)-1).toString():1==this.change_type&&(this.txt_price.text=(Number(this.txt_price.text)+1).toString()):1==this.change_detail&&(0==this.change_type?this.txt_num.text=Math.max(0,Number(this.txt_num.text)-1).toString():1==this.change_type&&(this.txt_num.text=(Number(this.txt_num.text)+1).toString()))},n.onTimerComplete=function(t){this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null),this.timer_change=new basic.Timer(50),this.timer_change.addEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.addEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change.start()},n.onStopChange=function(t){basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStopChange,this),basic.StageProxy.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStopChange,this),this.timer_change&&(this.timer_change.stop(),this.timer_change.removeEventListener(basic.TimerEvent.TIMER,this.onTimer,this),this.timer_change.removeEventListener(basic.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.timer_change=null)},n.onHuiFuBtn=function(t){basic.SoundManager.instance.playEffect("lightning_mp3"),this.txt_price.text=GameData.price_now.toString()},n.onChuLiBtn=function(t){var e=this;Api.instance.up_zhinengcaozuo(GameData.game_role,function(t){1==t.success?(egret.setTimeout(function(){basic.SoundManager.instance.playEffect("lightning_mp3")},e,100),basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:"操作成功"})):basic.Dispatcher.dispatch(EventNames.SHOW_ARENATIPS,{tips:t.code})})},e}(eui.Component);egret.registerClass(CaoZuoXinXiFace,"CaoZuoXinXiFace");var ChatMessage=function(t){function e(){t.call(this),this.skinName=ChatMessageSkin}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(t,e){var i;void 0!=e&&t.indexOf("：")>=0?(i="<font color="+e+">",i+=t.substring(0,t.indexOf("：")+1)+"</font>",i+=t.substring(t.indexOf("：")+1,t.length)):i=t,this.txt_detail.textFlow=(new egret.HtmlTextParser).parser(i),this.height=this.txt_detail.height+10},e}(eui.Component);egret.registerClass(ChatMessage,"ChatMessage");var DongTaiMessage=function(t){function e(){t.apply(this,arguments),this.txt_mai1_num=[],this.txt_mai2_num=[],this.txt_mai1_title=[],this.txt_mai2_title=[],this.txt_mai1_jiage=[],this.txt_mai2_jiage=[],this.now_showmenu=1,this.KLine_Num=0,this.KLineData=[],this.KLine_Part=[],this.txt_tubiao=[],this.txt_percent=[],this.KLine_kedu=0,this.isShow_fenshi=!1,this.kline_daxiao=0}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this);for(var e=1;6>e;e++){var i=this["txt_mai1_num"+e],n=this["txt_mai2_num"+e],a=this["txt_mai1_title"+e],s=this["txt_mai2_title"+e],o=this["txt_mai1_jiage"+e],r=this["txt_mai2_jiage"+e];this.txt_mai1_num[e]=i,this.txt_mai2_num[e]=n,this.txt_mai1_title[e]=a,this.txt_mai2_title[e]=s,this.txt_mai1_jiage[e]=o,this.txt_mai2_jiage[e]=r,this.txt_mai1_num[e].text="",this.txt_mai2_num[e].text="",this.txt_mai1_jiage[e].text="",this.txt_mai2_jiage[e].text=""}this.txt_jiage.text="";for(var h=0;5>h;h++){var c=this["txt_percent"+h],u=this["txt_tubiao"+h];this.txt_tubiao[h]=u,this.txt_percent[h]=c,this.txt_tubiao[h].text="",this.txt_percent[h].text=""}this.tb_menu.selectedIndex=this.now_showmenu,this.tb_menu.addEventListener(egret.Event.CHANGE,this.onChaneMenu,this),this.btn_jia.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJiaBtn,this),this.btn_jian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onJianBtn,this)},n.cleanKLine=function(){1==this.g_show.visible?this.removeKLineFace():this.removeFenShiFace(),this.KLineData=[]},n.onJiaBtn=function(t){egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),this.removeKLineFace(),1!=this.kline_daxiao&&(this.kline_daxiao+=1),this.showKLineFace()},n.onJianBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.removeKLineFace(),-1!=this.kline_daxiao&&(this.kline_daxiao-=1),this.showKLineFace()},n.onChaneMenu=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),0==this.tb_menu.selectedIndex?(this.KLineData=[],this.now_showmenu=this.tb_menu.selectedIndex,this.g_percent.visible=!0,this.g_showfenshi.visible=!0,this.g_show.visible=!1,this.btn_jia.visible=!1,this.btn_jian.visible=!1,basic.Dispatcher.dispatch(EventNames.CHANGE_KLINE,{klinetype:0})):5==this.tb_menu.selectedIndex?(PanelTips.instance.show("暂未开放"),this.tb_menu.selectedIndex=this.now_showmenu):(this.KLineData=[],this.now_showmenu=this.tb_menu.selectedIndex,this.g_show.visible=!0,this.btn_jia.visible=!0,this.btn_jian.visible=!0,this.g_percent.visible=!1,this.g_showfenshi.visible=!1,basic.Dispatcher.dispatch(EventNames.CHANGE_KLINE,{klinetype:this.now_showmenu-1}))},n.showPrice=function(t,e,i){for(var n=1;6>n;n++)this.txt_mai1_num[n].text="",this.txt_mai2_num[n].text="",this.txt_mai1_jiage[n].text="",this.txt_mai2_jiage[n].text="";if(this.txt_jiage.text="",GameData.price_now=i,this.txt_jiage.text=i.toString(),void 0!=e)for(var a=0;a<Math.min(5,e.length);a++)this.txt_mai1_num[a+1].text=e[a].volume,this.txt_mai1_jiage[a+1].text=e[a].price;if(void 0!=t)for(var s=0;s<Math.min(5,t.length);s++)this.txt_mai2_num[s+1].text=t[s].volume,this.txt_mai2_jiage[s+1].text=t[s].price},n.showKLine=function(t){if(t.length>0){1==this.g_show.visible?this.removeKLineFace():this.removeFenShiFace();for(var e=0;e<t.length;e++)this.KLineData.length>0&&this.KLineData[this.KLineData.length-1].id==t[e].id?this.KLineData[this.KLineData.length-1]=t[e]:this.KLineData[this.KLineData.length]=t[e];1==this.g_show.visible?this.showKLineFace():this.showFenShiFace()}},n.showFenShiFace=function(){var t,e,i=this.assMax(1),n=this.assMin(1);if(this.KLineData.length>0)var a=Math.floor(this.KLineData[0].openprice),s=Math.max(Math.floor((i-a)/1.5)+1,Math.floor((a-n)/1.5)+1);s>this.KLine_kedu?(this.KLine_kedu=s,this.KLine_middle=a):i<this.KLine_middle+this.KLine_kedu?(this.KLine_kedu=s,this.KLine_middle=a):n>this.KLine_middle-this.KLine_kedu&&(this.KLine_kedu=s,this.KLine_middle=a),e=Math.floor(this.KLine_kedu/this.KLine_middle*1e4)/100,t=this.KLineData.length<=72?5:360/this.KLineData.length,this.txt_percent[2].text="0%",this.txt_percent[0].text=Number(2*e).toString()+"%",this.txt_percent[1].text=Number(1*e).toString()+"%",this.txt_percent[3].text=Number(1*e).toString()+"%",this.txt_percent[4].text=Number(2*e).toString()+"%";for(var o=0;5>o;o++)this.txt_tubiao[o].text=Number(this.KLine_middle-2*this.KLine_kedu+o*this.KLine_kedu).toString();this.fenshi=new egret.Shape,this.fenshi.graphics.lineStyle(.5,4556020);for(var r=0;r<this.KLineData.length;r++){var h,c;h=r*t,c=75*(this.KLine_middle+2*this.KLine_kedu-this.KLineData[r].closeprice)/this.KLine_kedu,0==r?this.fenshi.graphics.moveTo(h,c):this.fenshi.graphics.lineTo(h,c)}this.fenshi.graphics.endFill(),this.g_showfenshi.addChild(this.fenshi),this.isShow_fenshi=!0},n.removeFenShiFace=function(){1==this.isShow_fenshi&&(this.g_showfenshi.removeChild(this.fenshi),this.isShow_fenshi=!1,this.fenshi=null)},n.showKLineFace=function(){var t=this.assMax(0),e=this.assMin(0),i=Math.floor((t-e)/3)+1,n=Math.floor((t+e)/2);i>this.KLine_kedu?(this.KLine_kedu=i,this.KLine_middle=n):t<this.KLine_middle+this.KLine_kedu?(this.KLine_kedu=i,this.KLine_middle=n):e>this.KLine_middle-this.KLine_kedu&&(this.KLine_kedu=i,this.KLine_middle=n);for(var a=0;5>a;a++)this.txt_tubiao[a].text=Number(this.KLine_middle-2*this.KLine_kedu+a*this.KLine_kedu).toString();var s,o,r,h;-1==this.kline_daxiao?(r=4,h=6,o=60,s=Math.min(60,this.KLineData.length)):0==this.kline_daxiao?(r=7,h=10,o=36,s=Math.min(36,this.KLineData.length)):1==this.kline_daxiao&&(r=10,h=15,o=24,s=Math.min(24,this.KLineData.length)),console.log(s);for(var c=0;s>c;c++){var u,d=new KLine;u=this.KLineData.length<=o?c:this.KLineData.length-o+c,d.show(r,this.KLine_kedu,this.KLineData[u]),d.x=c*h,d.y=75*(this.KLine_middle+2*this.KLine_kedu-this.KLineData[u].topprice)/this.KLine_kedu,this.KLine_Part[this.KLine_Num]=d,this.g_show.addChild(this.KLine_Part[this.KLine_Num]),this.KLine_Num+=1}},n.removeKLineFace=function(){for(var t=0;t<this.KLine_Num;t++)this.g_show.removeChild(this.KLine_Part[t]);this.KLine_Num=0,this.KLine_Part=[]},n.assMin=function(t){var e,i,n;0==t?-1==this.kline_daxiao?(n=60,i=Math.min(60,this.KLineData.length)):0==this.kline_daxiao?(n=36,i=Math.min(36,this.KLineData.length)):1==this.kline_daxiao&&(n=24,i=Math.min(24,this.KLineData.length)):i=this.KLineData.length;for(var a=0;i>a;a++){var s;s=0==t?this.KLineData.length<=n?a:this.KLineData.length-n+a:a,e=0==a?this.KLineData[s].lowprice:Math.min(e,this.KLineData[s].lowprice)}return e},n.assMax=function(t){var e,i,n;0==t?-1==this.kline_daxiao?(n=60,i=Math.min(60,this.KLineData.length)):0==this.kline_daxiao?(n=36,i=Math.min(36,this.KLineData.length)):1==this.kline_daxiao&&(n=24,i=Math.min(24,this.KLineData.length)):i=this.KLineData.length;for(var a=0;i>a;a++){var s;s=0==t?this.KLineData.length<=n?a:this.KLineData.length-n+a:a,e=0==a?this.KLineData[s].topprice:Math.max(e,this.KLineData[s].topprice)}return e},e}(eui.Component);egret.registerClass(DongTaiMessage,"DongTaiMessage");var Head=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),this.img_mask.visible=!0,this.img_head.mask=this.img_mask},n.show=function(t){null!=t&&""!=t&&(this.img_head.source=t)},e}(eui.Component);egret.registerClass(Head,"Head");var HuDongMessage=function(t){function e(){t.apply(this,arguments),this.now_showhead=""}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowHuDong,this)},n.show=function(t,e,i){this.hudong_type=e,this.txt_name.text="",this.txt_yinli.text="",this.txt_yinli1.text="",0==e?(this.g_detail.visible=!1,this.txt_gengsui.visible=!1,this.com_hudong_type.visible=!0,this.com_hudong_type.currentState="hudong"):1==e?(this.g_detail.visible=!0,this.txt_gengsui.visible=!1,this.com_hudong_type.visible=!1,this.now_showhead!=i.url&&(this.head.show(i.url),this.now_showhead=i.url),1==i.direction?this.txt_chicang.textColor=15600444:2==i.direction&&(this.txt_chicang.textColor=4116033),"RETAIL"==i.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==i.auctionrole?this.com_type.currentState="2":"MECHANISM"==i.auctionrole&&(this.com_type.currentState="3"),this.txt_name.text=i.accountname,void 0!=i.income?(this.txt_yinli1.text=Number(Math.floor(1e3*i.income)/10).toString()+"%",i.income>0?this.txt_yinli1.textColor=15600444:this.txt_yinli1.textColor=4116033):(this.txt_yinli1.text="0%",this.txt_yinli1.textColor=15600444),this.g_tiaozhan.visible=!1,this.g_gengsui.visible=!1,this.txt_type.text="PK",this.rect_jindu1.width=241*Math.min(1,i.volume/i.initialcurrentvolume),this.rect_jindu2.width=241*Math.min(1,Math.max(0,i.volume/i.initialcurrentvolume-1))):2==e?(this.g_detail.visible=!0,this.txt_gengsui.visible=!1,this.com_hudong_type.visible=!1,this.now_showhead!=i.url&&(this.head.show(i.url),this.now_showhead=i.url),1==i.direction?this.txt_chicang.textColor=15600444:2==i.direction&&(this.txt_chicang.textColor=4116033),"RETAIL"==i.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==i.auctionrole?this.com_type.currentState="2":"MECHANISM"==i.auctionrole&&(this.com_type.currentState="3"),this.g_gengsui.y=130,this.g_gengsui.visible=!0,this.g_tiaozhan.visible=!1,this.txt_type.text="跟随",void 0!=i.income?(this.txt_yinli.text=Number(Math.floor(1e3*i.income)/10).toString()+"%",i.income>0?this.txt_yinli.textColor=15600444:this.txt_yinli.textColor=4116033):(this.txt_yinli.text="0%",this.txt_yinli.textColor=15600444),i.currentvolume<=1e4?this.txt_zichan.text=i.currentvolume:i.currentvolume>1e4&&i.currentvolume<1e8?this.txt_zichan.text=Number(Math.floor(i.currentvolume/100)/100).toString()+"万":this.txt_zichan.text=Number(Math.floor(i.currentvolume/1e6)/100).toString()+"亿",i.volume<=1e4?this.txt_xianjin.text=i.volume:i.volume>1e4&&i.volume<1e8?this.txt_xianjin.text=Number(Math.floor(i.volume/100)/100).toString()+"万":this.txt_xianjin.text=Number(Math.floor(i.volume/1e6)/100).toString()+"亿",void 0!=i.position?this.txt_chicang.text=i.position+"手":this.txt_chicang.text="0手",void 0!=i.price?this.txt_chicangjia.text=i.price:this.txt_chicangjia.text="0"):3==e?(this.g_detail.visible=!1,this.txt_gengsui.visible=!0,this.com_hudong_type.visible=!0,this.com_hudong_type.currentState="gensui",this.txt_gengsui.text=i+"名好友跟随"):(4==e||5==e)&&(this.g_detail.visible=!0,this.txt_gengsui.visible=!1,this.com_hudong_type.visible=!1,this.now_showhead!=i.url&&(this.head.show(i.url),this.now_showhead=i.url),1==i.direction?this.txt_chicang.textColor=15600444:2==i.direction&&(this.txt_chicang.textColor=4116033),"RETAIL"==i.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==i.auctionrole?this.com_type.currentState="2":"MECHANISM"==i.auctionrole&&(this.com_type.currentState="3"),this.g_gengsui.y=110,this.g_tiaozhan.y=183,this.g_gengsui.visible=!0,this.g_tiaozhan.visible=!0,this.txt_type.text="猎杀",void 0!=i.income?(this.txt_yinli.text=Number(Math.floor(1e3*i.income)/10).toString()+"%",i.income>0?this.txt_yinli.textColor=15600444:this.txt_yinli.textColor=4116033):(this.txt_yinli.text="0%",this.txt_yinli.textColor=15600444),i.currentvolume<=1e4?this.txt_zichan.text=i.currentvolume:i.currentvolume>1e4&&i.currentvolume<1e8?this.txt_zichan.text=Number(Math.floor(i.currentvolume/100)/100).toString()+"万":this.txt_zichan.text=Number(Math.floor(i.currentvolume/1e6)/100).toString()+"亿",i.volume<=1e4?this.txt_xianjin.text=i.volume:i.volume>1e4&&i.volume<1e8?this.txt_xianjin.text=Number(Math.floor(i.volume/100)/100).toString()+"万":this.txt_xianjin.text=Number(Math.floor(i.volume/1e6)/100).toString()+"亿",void 0!=i.position?this.txt_chicang.text=i.position+"手":this.txt_chicang.text="0手",void 0!=i.price?this.txt_chicangjia.text=i.price:this.txt_chicangjia.text="0",this.rect_jindu1.width=241*Math.min(1,i.volume/i.initialcurrentvolume),this.rect_jindu2.width=241*Math.min(1,Math.max(0,i.volume/i.initialcurrentvolume-1)))},n.onShowHuDong=function(t){0==this.hudong_type?(egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),basic.SceneManager.addTopScene(SceneNames.HUDONG1)):3==this.hudong_type&&(egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),PanelGenSui.instance.show())},e}(eui.Component);egret.registerClass(HuDongMessage,"HuDongMessage");var Information=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this)},n.info=function(){this.head.show(UserData.User_Head),this.txt_name.text=UserData.User_Name,this.txt_jifen.text=UserData.User_JiFen.toString(),this.txt_touxian.text=UserData.TouXian_Name[UserData.User_DengJi],this.txt_dengji.text=UserData.DengJi_Name[UserData.User_DengJi]},e}(eui.Component);egret.registerClass(Information,"Information");var KLine=function(t){function e(){t.call(this),this.skinName=KLineSkin}__extends(e,t);var i=(__define,e),n=i.prototype;return n.show=function(t,e,i){var n=75/e;i.openprice<=i.closeprice?(this.currentState="1",this.rect_box.height=Math.max(1,(i.closeprice-i.openprice)*n),this.rect_up.height=(i.topprice-i.closeprice)*n,this.rect_down.height=(i.openprice-i.lowprice)*n):(this.currentState="2",this.rect_box.height=Math.max(1,(i.openprice-i.closeprice)*n),this.rect_up.height=(i.topprice-i.openprice)*n,this.rect_down.height=(i.closeprice-i.lowprice)*n),this.rect_box.y=this.rect_up.height,this.height=(i.topprice-i.lowprice)*n,this.width=t},e}(eui.Component);egret.registerClass(KLine,"KLine");var Start_Main=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=Start_Main_Item},n.info=function(){var t=this;this.takecard.info(),this.information.info(),Api.instance.get_start_list(function(e){1==e.success&&(t._data.source=e.list,GameData.start_list=e.list)}),this._data.refresh()},n.stop=function(){this.takecard.stop()},e}(eui.Component);egret.registerClass(Start_Main,"Start_Main");var Start_Main_Item=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.txt_name.text=this.data.num,this.txt_date.text=this.data.day+"  "+this.data.date,1==this.data.isenroll?(this.btn_yes.label="已报名",this.btn_yes.enabled=!1):(this.btn_yes.label="报名",this.btn_yes.enabled=!0),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this)},n.onYesBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("nomal_mp3"),Api.instance.start_signup(this.data.code,function(t){1==t.success&&(e.data.isenroll=!0,e.btn_yes.label="已报名",e.btn_yes.enabled=!1)})},e}(eui.ItemRenderer);egret.registerClass(Start_Main_Item,"Start_Main_Item");var Start_Mine=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),basic.Dispatcher.addListener(EventNames.SHOW_TIPS,this.onShowTips,this),this.btn_friends.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriendsBtn,this),this.btn_history.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHistoryBtn,this),this.txt_detail.addEventListener(egret.FocusEvent.FOCUS_IN,this.onDetailText,this),this.txt_detail.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onDetailText,this)},n.info=function(){this.information.info(),this.txt_detail.text=UserData.User_Detail,""==this.txt_detail.text?this.txt_tips.visible=!0:this.txt_tips.visible=!1},n.onDetailText=function(t){var e=this;t.type==egret.FocusEvent.FOCUS_IN?this.txt_tips.visible=!1:t.type==egret.FocusEvent.FOCUS_OUT&&(""==this.txt_detail.text?this.txt_tips.visible=!0:this.txt_tips.visible=!1,this.txt_detail.text!=UserData.User_Detail&&Api.instance.up_user_detail(this.txt_detail.text,function(t){1==t.success&&(UserData.User_Detail=e.txt_detail.text)}))},n.onHistoryBtn=function(t){egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),UserData.Other_UserId="",basic.SceneManager.addTopScene(SceneNames.HISTORY)
},n.onFriendsBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.rect_tips.visible=!1,basic.SceneManager.addTopScene(SceneNames.FRIENDS)},n.onShowTips=function(t){this.rect_tips.visible=!0},e}(eui.Component);egret.registerClass(Start_Mine,"Start_Mine");var Start_Ranking=function(t){function e(){t.apply(this,arguments),this.btn_type=[],this.is_getdata=[!1,!1,!1],this.jifen=[0,0,0],this.mingci=[0,0,0]}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this);for(var e=0;3>e;e++){var i=this["btn_type"+e];this.btn_type[e]=i,this.btn_type[e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeBtn,this)}GameData.ranking_type=0,this.viewStack.selectedIndex=0,this.com_type.currentState="0",this.txt_name.text="我的",this.list1.dataProvider=this._data1=new eui.ArrayCollection,this.list2.dataProvider=this._data2=new eui.ArrayCollection,this.list3.dataProvider=this._data3=new eui.ArrayCollection,this.list1.itemRenderer=RankingItem1,this.list2.itemRenderer=RankingItem2,this.list3.itemRenderer=RankingItem2},n.info=function(){this.getData()},n.getData=function(){var t=this;0==this.is_getdata[GameData.ranking_type]?(Api.instance.get_ranking(GameData.ranking_type,function(e){if(1==e.success){for(var i=e.map.list,n=0;n<i.length;n++)i[n].num=n+1;t.mingci[GameData.ranking_type]=e.map.my.valid,0==GameData.ranking_type?void 0==e.map.my.val?t.jifen[GameData.ranking_type]=0:t.jifen[GameData.ranking_type]=e.map.my.val:void 0==e.map.my.income?t.jifen[GameData.ranking_type]=0:t.jifen[GameData.ranking_type]=Number(Math.floor(1e3*e.map.my.income)/10),0==GameData.ranking_type?t._data1.source=i:1==GameData.ranking_type?t._data2.source=i:2==GameData.ranking_type&&(t._data3.source=i),t.is_getdata[GameData.ranking_type]=!0,-1==t.mingci[GameData.ranking_type]?t.txt_mingci.text="--":t.txt_mingci.text=t.mingci[GameData.ranking_type].toString(),0==GameData.ranking_type?t.txt_jifen.text=t.jifen[GameData.ranking_type].toString():-1==t.mingci[GameData.ranking_type]?t.txt_jifen.text="--":t.txt_jifen.text=t.jifen[GameData.ranking_type]+"%"}}),0==GameData.ranking_type?this._data1.refresh():1==GameData.ranking_type?this._data2.refresh():2==GameData.ranking_type&&this._data3.refresh()):(-1==this.mingci[GameData.ranking_type]?this.txt_mingci.text="--":this.txt_mingci.text=this.mingci[GameData.ranking_type].toString(),0==GameData.ranking_type?this.txt_jifen.text=this.jifen[GameData.ranking_type].toString():-1==this.mingci[GameData.ranking_type]?this.txt_jifen.text="--":this.txt_jifen.text=this.jifen[GameData.ranking_type]+"%")},n.onTypeBtn=function(t){var e=Number(t.target.name);basic.SoundManager.instance.playEffect("nomal_mp3"),GameData.ranking_type=e,this.viewStack.selectedIndex=e,this.com_type.currentState=e.toString(),0==GameData.ranking_type?this.txt_jifen_title.text="积分":this.txt_jifen_title.text="收益率",this.getData()},e}(eui.Component);egret.registerClass(Start_Ranking,"Start_Ranking");var RankingItem1=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){var e=this;t.prototype.dataChanged.call(this),this.head.show(this.data.url),this.txt_num.text=this.data.num,1==this.data.num?this.img_point.source="icon_point_hong_png":2==this.data.num?this.img_point.source="icon_point_cheng_png":3==this.data.num?this.img_point.source="icon_point_huang_png":this.img_point.source="icon_point_hui_png",this.txt_name.text=this.data.nickname,void 0==this.data.val?this.txt_jifen.text="0":this.txt_jifen.text=this.data.val,void 0==this.data.ulevel?(this.txt_duanwei.text=UserData.DengJi_Name[0],this.txt_touxian.text=UserData.TouXian_Name[0]):(this.txt_duanwei.text=UserData.DengJi_Name[this.data.ulevel],this.txt_touxian.text=UserData.TouXian_Name[this.data.ulevel]),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelUserMessage.instance.show(e.data.accountId)},this)},e}(eui.ItemRenderer);egret.registerClass(RankingItem1,"RankingItem1");var RankingItem2=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){var e=this;t.prototype.dataChanged.call(this),this.head.show(this.data.url),this.txt_jifen_title.text="收益率",this.txt_num.text=this.data.num,1==this.data.num?this.img_point.source="icon_point_hong_png":2==this.data.num?this.img_point.source="icon_point_cheng_png":3==this.data.num?this.img_point.source="icon_point_huang_png":this.img_point.source="icon_point_hui_png",this.txt_name.text=this.data.nickname,void 0==this.data.income?this.txt_jifen.text="0%":this.txt_jifen.text=Number(Math.floor(1e3*this.data.income)/10).toString()+"%",void 0==this.data.ulevel?(this.txt_duanwei.text=UserData.DengJi_Name[0],this.txt_touxian.text=UserData.TouXian_Name[0]):(this.txt_duanwei.text=UserData.DengJi_Name[this.data.ulevel],this.txt_touxian.text=UserData.TouXian_Name[this.data.ulevel]),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelUserMessage.instance.show(e.data.accountId)},this)},e}(eui.ItemRenderer);egret.registerClass(RankingItem2,"RankingItem2");var TakeCard=function(t){function e(){t.apply(this,arguments),this.is_starttime=!1,this.is_startgetdata=!1}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this),this.btn_enter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnterBtn,this)},n.info=function(){this.getData()},n.getData=function(){var t=this;this.stop(),this.is_startgetdata=!0,Api.instance.get_start_data(function(e){t.is_startgetdata=!1,1==e.success&&(t.game_code=e.data.code,t.game_date=e.data.data,UserData.User_Code=e.data.code,void 0!=e.data.drawTime?t.game_daojishi1=e.data.drawTime:t.game_daojishi1="",t.game_daojishi2=e.data.auctionTime,console.log(t.game_daojishi1),console.log(t.game_daojishi2),t.btn_enter.label=e.data.str,1==e.data.isAuctionTime?t.btn_enter.enabled=!0:t.btn_enter.enabled=!1,"RETAIL"==e.data.auctionRole?(t.com_role.currentState="1",t.rect_time1.fillColor=6447714,t.rect_time2.fillColor=6447714,t.rect_time3.fillColor=6447714):"BIGRETAIL"==e.data.auctionRole?(t.com_role.currentState="2",t.rect_time1.fillColor=6447714,t.rect_time2.fillColor=6447714,t.rect_time3.fillColor=6447714):"MECHANISM"==e.data.auctionRole?(t.com_role.currentState="3",t.rect_time1.fillColor=6447714,t.rect_time2.fillColor=6447714,t.rect_time3.fillColor=6447714):(t.rect_time1.fillColor=1907748,t.rect_time2.fillColor=1907748,t.rect_time3.fillColor=1907748,t.com_role.currentState="close"),t.is_starttime=!0,t.addEventListener(egret.Event.ENTER_FRAME,t.onShowTimes,t))})},n.stop=function(){this.is_starttime&&(this.is_starttime=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.onShowTimes,this))},n.onShowTimes=function(t){var e,i=new Date;""!=this.game_daojishi1&&3600*i.getHours()+60*i.getMinutes()+i.getSeconds()<3600*Number(this.game_daojishi1.split(":")[0])+60*Number(this.game_daojishi1.split(":")[1])?e=3600*Number(this.game_daojishi1.split(":")[0])+60*Number(this.game_daojishi1.split(":")[1])-3600*i.getHours()-60*i.getMinutes()-i.getSeconds():3600*i.getHours()+60*i.getMinutes()+i.getSeconds()<3600*Number(this.game_daojishi2.split(":")[0])+60*Number(this.game_daojishi2.split(":")[1])?(e=3600*Number(this.game_daojishi2.split(":")[0])+60*Number(this.game_daojishi2.split(":")[1])-3600*i.getHours()-60*i.getMinutes()-i.getSeconds(),"close"==this.com_role.currentState&&0==this.is_startgetdata&&this.getData()):(e=0,0==this.btn_enter.enabled&&0==this.is_startgetdata&&this.getData()),Math.floor(e/3600)<10?this.txt_time1.text="0"+String(Math.floor(e/3600)):this.txt_time1.text=String(Math.floor(e/3600)),Math.floor(e%3600/60)<10?this.txt_time2.text="0"+String(Math.floor(e%3600/60)):this.txt_time2.text=String(Math.floor(e%3600/60)),Number(e%3600%60)<10?this.txt_time3.text="0"+String(Number(e%3600%60)):this.txt_time3.text=String(Number(e%3600%60))},n.onEnterBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.show(SceneNames.ARENA,null,basic.sceneEffect.Fade),basic.Dispatcher.dispatch(EventNames.HIDE_CHOOSEBTN)},e}(eui.Component);egret.registerClass(TakeCard,"TakeCard");var UserMessage=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.createChildren=function(){t.prototype.createChildren.call(this)},n.show=function(t,e,i){0==t&&this.head.show(i.url),"RETAIL"==i.auctionrole?(GameData.game_role=1,this.com_type.currentState="1"):"BIGRETAIL"==i.auctionrole?(GameData.game_role=2,this.com_type.currentState="2"):"MECHANISM"==i.auctionrole&&(GameData.game_role=3,this.com_type.currentState="3"),1==i.direction?this.txt_chicang.textColor=15600444:2==i.direction&&(this.txt_chicang.textColor=4116033),void 0!=i.income?(this.txt_yinli.text=Number(Math.floor(1e3*i.income)/10).toString()+"%",i.income>0?this.txt_yinli.textColor=15600444:this.txt_yinli.textColor=4116033):(this.txt_yinli.text="0%",this.txt_yinli.textColor=15600444),4==e||5==e?void 0!=i.preyincome?(this.txt_yingli_add.text=Number(Math.floor(1e3*i.preyincome)/10).toString()+"%",i.preyincome>0?this.txt_yingli_add.textColor=15600444:this.txt_yingli_add.textColor=4116033):(this.txt_yingli_add.text="0%",this.txt_yingli_add.textColor=15600444):this.txt_yingli_add.text="",console.log(i.currentvolume),i.currentvolume<=1e4?this.txt_zichan.text=i.currentvolume:i.currentvolume>1e4&&i.currentvolume<1e8?this.txt_zichan.text=Number(Math.floor(i.currentvolume/100)/100).toString()+"万":this.txt_zichan.text=Number(Math.floor(i.currentvolume/1e6)/100).toString()+"亿",i.volume<=1e4?this.txt_xianjin.text=i.volume:i.volume>1e4&&i.volume<1e8?this.txt_xianjin.text=Number(Math.floor(i.volume/100)/100).toString()+"万":this.txt_xianjin.text=Number(Math.floor(i.volume/1e6)/100).toString()+"亿",void 0!=i.position?this.txt_chicang.text=i.position+"手":this.txt_chicang.text="0手",void 0!=i.price?this.txt_chicangjia.text=i.price:this.txt_chicangjia.text="0",void 0!=i.buynum?this.txt_zuiduokezuo.text=i.buynum+"手":this.txt_zuiduokezuo.text="0手",void 0!=i.sellnum?this.txt_kezuokong.text=i.sellnum+"手":this.txt_kezuokong.text="0手"},e}(eui.Component);egret.registerClass(UserMessage,"UserMessage");var PanelCheDan=function(t){function e(){t.call(this)}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=PanelCheDanSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=CheDanItem,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},a.show=function(t){var e=this;void 0===t&&(t=null),this._callback=t,this.popup(this.funExit.bind(this)),GameData.chedan_list=[],Api.instance.get_game_chexiao(function(t){if(1==t.success){if(void 0!=t.list)for(var i=0;i<t.list.length;i++)GameData.chedan_list[i]=t.list[i],GameData.chedan_list[i].itemnum=i;e._data.source=GameData.chedan_list}}),this._data.refresh()},a.onShowCheDan=function(t){this._data.source=GameData.chedan_list,this._data.refresh()},a.funExit=function(){this.dealAction(),this._callback&&this._callback()},a.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.funExit()},e}(basic.PanelBase);egret.registerClass(PanelCheDan,"PanelCheDan");var CheDanItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),1==this.data.direction?this.txt_num.textColor=15947631:2==this.data.direction&&(this.txt_num.textColor=3990672),this.txt_price.text=this.data.price,this.txt_num.text=this.data.volume+"手",this.data.itemnum%2==0?this.rect_back.fillColor=16448250:this.rect_back.fillColor=15790320,this.btn_chedan.label="撤单",this.btn_chedan.enabled=!0,this.btn_chedan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCheDanBtn,this)},n.onCheDanBtn=function(t){var e=this;egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),Api.instance.up_game_chexiao(this.data.id,function(t){1==t.success?(e.btn_chedan.label="已撤单",e.btn_chedan.enabled=!1):PanelTips.instance.show(t.code)})},e}(eui.ItemRenderer);egret.registerClass(CheDanItem,"CheDanItem");var PanelChooseTips=function(t){function e(){t.call(this)}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=PanelChooseTipsSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)},a.show=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.fun_yes=e,this._callback=i,this.txt_tips.text=t,this.popup(this.funExit.bind(this))},a.funExit=function(){this.dealAction()},a.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.funExit()},a.onYesBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.funExit(),this.fun_yes&&this.fun_yes()},e}(basic.PanelBase);egret.registerClass(PanelChooseTips,"PanelChooseTips");var PanelGenSui=function(t){function e(){t.call(this)}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=PanelGenSuiSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=GenSuiItem,this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this)},a.show=function(t){var e=this;void 0===t&&(t=null),this._callback=t,this.popup(this.funExit.bind(this)),Api.instance.get_game_gensui(function(t){1==t.success&&(e._data.source=t.list)}),this._data.refresh()},a.funExit=function(){this.dealAction(),this._callback&&this._callback()},a.onCloseBtn=function(t){this.funExit()},e}(basic.PanelBase);egret.registerClass(PanelGenSui,"PanelGenSui");var GenSuiItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.url),this.txt_name.text=this.data.accountname,"RETAIL"==this.data.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==this.data.auctionrole?this.com_type.currentState="2":"MECHANISM"==this.data.auctionrole&&(this.com_type.currentState="3"),this.btn_quxiao.label="取消",this.btn_quxiao.enabled=!0,this.btn_quxiao.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onQuXiaoBtn,this)},n.onQuXiaoBtn=function(t){var e=this;Api.instance.up_game_quxiaogensui(this.data.accountId,function(t){1==t.success&&(e.btn_quxiao.enabled=!1,e.btn_quxiao.label="已取消")})},e}(eui.ItemRenderer);egret.registerClass(GenSuiItem,"GenSuiItem");var PanelTips=function(t){function e(){t.call(this)}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=PanelTipsSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this)},a.show=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.fun_yes=e,this._callback=i,this.txt_tips.text=t,this.popup(this.funExit.bind(this))},a.funExit=function(){this.dealAction()},a.onYesBtn=function(t){this.funExit(),this.fun_yes&&this.fun_yes()},e}(basic.PanelBase);egret.registerClass(PanelTips,"PanelTips");var PanelUserMessage=function(t){function e(){t.call(this)}__extends(e,t);var i=__define,n=e,a=n.prototype;return i(e,"instance",function(){return void 0==this._instance&&(this._instance=new e),this._instance}),a.init=function(){this.skinName=PanelUserMessageSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseBtn,this),this.btn_history.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHistoryBtn,this)},a.show=function(t,e){var i=this;void 0===e&&(e=null),this._callback=e,this.now_userid=t,this.popup(this.funExit.bind(this)),Api.instance.get_otherusermessage(t,function(t){1==t.success&&(i.head.show(t.data.face),i.txt_name.text=t.data.nickname,void 0==t.data.val?i.txt_jifen.text="0":i.txt_jifen.text=t.data.val,void 0==t.data.ulevel?(i.txt_touxian.text=UserData.TouXian_Name[0],i.txt_dengji.text=UserData.DengJi_Name[0]):(i.txt_touxian.text=UserData.TouXian_Name[t.data.ulevel],i.txt_dengji.text=UserData.DengJi_Name[t.data.ulevel]),void 0==t.data.introduce?i.txt_detail.text="":i.txt_detail.text=t.data.introduce)})},a.funExit=function(){this.dealAction()},a.onCloseBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.funExit()},a.onHistoryBtn=function(t){this.dealAction(),UserData.Other_UserId=this.now_userid,basic.SceneManager.addTopScene(SceneNames.HISTORY),egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100)},e}(basic.PanelBase);egret.registerClass(PanelUserMessage,"PanelUserMessage");var SceneArena=function(t){function e(){t.call(this),this.kline_now=0,this.timer_getdata=null,this.kline_type=["ONEMIN","FIVEMIN","FIFTEENMIN","DAY"],this._tween_y=null,this.skinName=SceneArenaSkin,basic.Dispatcher.addListener(EventNames.SHOW_ARENATIPS,this.onShowTips,this),basic.Dispatcher.addListener(EventNames.CHANGE_KLINE,this.onChangeKLine,this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_about.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAboutBtn,this),basic.Dispatcher.addListener(EventNames.SHOW_KEYBOARD,this.onShowKeyBoard,this),basic.Dispatcher.addListener(EventNames.HIDE_KEYBOARD,this.onHideKeyBoard,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){this.getData(0),this.timer_getdata=new basic.Timer(2e3),this.timer_getdata.addEventListener(basic.TimerEvent.TIMER,this.onGetData,this),this.timer_getdata.start()},n.onHide=function(){this.dongtaimessage.cleanKLine()},n.onGetData=function(t){this.getData(2)},n.onShowKeyBoard=function(t){this.y=-500,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHideKeyBoardBtn,this)},n.onHideKeyBoardBtn=function(t){this.y=0;try{this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHideKeyBoardBtn,this)}catch(e){}},n.onHideKeyBoard=function(t){this.y=0;try{this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHideKeyBoardBtn,this)}catch(e){}},n.onShowTips=function(t){var e=this;this.txt_tips.text=t.data.tips,this._tween_y&&(this._tween_y.setPaused(!0),this._tween_y=null),this.g_tips.y=-100,this.g_tips.alpha=1,this._tween_y=egret.Tween.get(this.g_tips).to({y:100},500).wait(2e3).to({alpha:0},200).call(function(){e.g_tips.y=-100,e.g_tips.alpha=1})},n.onChangeKLine=function(t){this.kline_now=t.data.klinetype,this.getData(1)},n.getData=function(t){var e=this;Api.instance.get_game_data(Math.max(1,t),this.kline_type[this.kline_now],function(i){if(1==i.success){var n;if(e.user_data=i.data.accountAuctionRole,e.buy_data=i.data.buyList,e.sell_data=i.data.sellList,e.now_price=i.data.lastPrice,void 0==e.user_data.preycode?n=0:"CHALLENGE"==e.user_data.preycode?n=1:"FOLLOW"==e.user_data.preycode?n=2:"FOLLOWED"==e.user_data.preycode?n=3:"MECHANISM"==e.user_data.preycode?n=4:"BIGRETAIL"==e.user_data.preycode&&(n=5),3==n?e.hudong_data=i.data.followedNum:e.hudong_data=i.data.prey,e.usermessage.show(t,n,e.user_data),e.hudongmessage.show(t,n,e.hudong_data),e.dongtaimessage.showPrice(e.buy_data,e.sell_data,e.now_price),void 0==i.data.ktrades||e.dongtaimessage.showKLine(i.data.ktrades),void 0!=i.data.accountMessage)for(var a=0;a<i.data.accountMessage.length;a++)e.caozuoxinxi.showChat(i.data.accountMessage[a].messageInfo,i.data.accountMessage[a].color);if(e.caozuoxinxi.showHuDongTips(i.data.friendRelationMessageNum),4==n?e.caozuoxinxi.showSendType(0):5==n?e.caozuoxinxi.showSendType(1):3==n?e.caozuoxinxi.showSendType(2):e.caozuoxinxi.showSendType(-1),0==t){var s;"RETAIL"==e.user_data.auctionrole?s=1:"BIGRETAIL"==e.user_data.auctionrole?s=5:"MECHANISM"==e.user_data.auctionrole&&(s=20),e.caozuoxinxi.info(e.now_price,s)}}})},n.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.back(null,basic.sceneEffect.Fade),basic.Dispatcher.dispatch(EventNames.SHOW_CHOOSEBTN)},n.onAboutBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.addTopScene(SceneNames.PLAYRULE)},e}(basic.SceneBase);egret.registerClass(SceneArena,"SceneArena");var SceneDownBtn=function(t){function e(){t.call(this),this.skinName=DownChooseBtnSkin,basic.Dispatcher.addListener(EventNames.SHOW_TIPS,this.onShowTips,this),this.tb_menu.addEventListener(egret.Event.CHANGE,this.onTypeChange,this),basic.Dispatcher.addListener(EventNames.SHOW_CHOOSEBTN,this.onShowBtn,this),basic.Dispatcher.addListener(EventNames.HIDE_CHOOSEBTN,this.onHideBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(t){this.g_btn.y=basic.StageProxy.height-89},n.onTypeChange=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.Dispatcher.dispatch(EventNames.SHOW_STARTTYPE,{type:this.tb_menu.selectedIndex}),2==this.tb_menu.selectedIndex&&(this.rect_tips.visible=!1)},n.onShowTips=function(t){this.rect_tips.visible=!0},n.onShowBtn=function(t){egret.Tween.get(this.g_btn).to({y:basic.StageProxy.height-89},200)},n.onHideBtn=function(t){egret.Tween.get(this.g_btn).to({y:basic.StageProxy.height},200)},e}(basic.SceneBase);egret.registerClass(SceneDownBtn,"SceneDownBtn");var SceneFriends=function(t){function e(){t.call(this),this.page_num=20,this.skinName=SceneFriendsSkin,this.list.dataProvider=this._data=new eui.ArrayCollection,this.list1.dataProvider=this._data1=new eui.ArrayCollection,this.list2.dataProvider=this._data2=new eui.ArrayCollection,this.list3.dataProvider=this._data3=new eui.ArrayCollection,this.list.itemRenderer=Friends2Item,this.list1.itemRenderer=Friends1Item,this.list2.itemRenderer=Friends2Item,this.list3.itemRenderer=Friends3Item,this.viewStack.selectedIndex=0,this.btn_type.currentState="up",this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_type0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeBtn,this),this.btn_type1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this),this.txt_search.addEventListener(egret.FocusEvent.FOCUS_IN,this.onSearchText,this),this.txt_search.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onSearchText,this),this.g_tuijian.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShuaXinTuiJian,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){"up"==this.btn_type.currentState?this.viewStack.selectedIndex=0:this.viewStack.selectedIndex=1,this.getData()},n.getData=function(t){var e=this;void 0===t&&(t=""),0==this.viewStack.selectedIndex?(Api.instance.get_applyfriend_list(function(t){1==t.success&&(void 0==t.list?(e._data1.source=[],e.txt_shengqing.text="0个玩家请求加你好友"):(e._data1.source=t.list,e.txt_shengqing.text=String(t.list.length)+"个玩家请求加你好友"))}),this._data1.refresh(),Api.instance.search_forotherfriend_list(function(t){1==t.success&&(void 0==t.list?e._data2.source=[]:e._data2.source=t.list)}),this._data2.refresh()):1==this.viewStack.selectedIndex?(this.page_now=1,Api.instance.get_friend_list(this.page_now,this.page_num,function(t){1==t.success&&(void 0==t.page.list?e._data3.source=[]:e._data3.source=t.page.list)}),this._data3.refresh()):2==this.viewStack.selectedIndex&&(Api.instance.search_account(t,1,20,function(t){1==t.success&&(void 0==t.page.list?e._data.source=[]:e._data.source=t.page.list)}),this._data.refresh())},n.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.removeTopScene(SceneNames.FRIENDS)},n.onTypeBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),"1"==t.target.name?(this.viewStack.selectedIndex=1,this.btn_type.currentState="down",this.getData()):"0"==t.target.name&&(this.viewStack.selectedIndex=0,this.btn_type.currentState="up",this.getData())},n.onDeleteBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),this.txt_search.text="",this.txt_search_tips.visible=!0},n.onShuaXinTuiJian=function(t){var e=this;basic.SoundManager.instance.playEffect("nomal_mp3"),Api.instance.search_forotherfriend_list(function(t){1==t.success&&(void 0==t.list?e._data2.source=[]:e._data2.source=t.list)}),this._data2.refresh()},n.onSearchText=function(t){var e=this;t.type==egret.FocusEvent.FOCUS_IN?this.txt_search_tips.visible=!1:egret.setTimeout(function(){""==e.txt_search.text?e.txt_search_tips.visible=!0:(e.viewStack.selectedIndex=2,e.getData(e.txt_search.text))},this,200)},e}(basic.SceneBase);egret.registerClass(SceneFriends,"SceneFriends");var Friends1Item=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.face),this.txt_name.text=this.data.nickname,void 0==this.data.ulevel?this.txt_duanwei.text=UserData.DengJi_Name[0]:this.txt_duanwei.text=UserData.DengJi_Name[this.data.ulevel],this.btn_add.label="同意",this.btn_delete.label="拒绝",this.btn_add.enabled=!0,this.btn_delete.enabled=!0,this.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtn,this),this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMessageBtn,this)},n.onShowMessageBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelUserMessage.instance.show(this.data.id)},n.onAddBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("nomal_mp3"),Api.instance.add_friend_agree(this.data.id,function(t){1==t.success?(e.btn_add.label="已添加",e.btn_add.enabled=!1,e.btn_delete.enabled=!1):PanelTips.instance.show(t.code)})},n.onDeleteBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("nomal_mp3"),Api.instance.delete_friend(this.data.id,function(t){1==t.success?(e.btn_add.label="已拒绝",e.btn_add.enabled=!1,e.btn_delete.enabled=!1):PanelTips.instance.show(t.code)})},e}(eui.ItemRenderer);egret.registerClass(Friends1Item,"Friends1Item");var Friends2Item=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.face),this.txt_name.text=this.data.nickname,void 0==this.data.ulevel?(this.txt_duanwei.text=UserData.DengJi_Name[0],this.txt_touxian.text=UserData.TouXian_Name[0]):(this.txt_duanwei.text=UserData.DengJi_Name[this.data.ulevel],this.txt_touxian.text=UserData.TouXian_Name[this.data.ulevel]),this.btn_add.label="加好友",this.btn_add.enabled=!0,this.btn_add.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddBtn,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMessageBtn,this)},n.onShowMessageBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelUserMessage.instance.show(this.data.id)},n.onAddBtn=function(t){var e=this;basic.SoundManager.instance.playEffect("nomal_mp3"),Api.instance.add_friend(this.data.id,function(t){1==t.success?(e.btn_add.label="已申请",e.btn_add.enabled=!1):PanelTips.instance.show(t.code)})},e}(eui.ItemRenderer);egret.registerClass(Friends2Item,"Friends2Item");var Friends3Item=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.face),this.txt_name.text=this.data.nickname,void 0==this.data.ulevel?(this.txt_duanwei.text=UserData.DengJi_Name[0],this.txt_touxian.text=UserData.TouXian_Name[0]):(this.txt_duanwei.text=UserData.DengJi_Name[this.data.ulevel],this.txt_touxian.text=UserData.TouXian_Name[this.data.ulevel]),this.btn_delete.label="删除",this.btn_delete.enabled=!0,this.btn_delete.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDeleteBtn,this),this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShowMessageBtn,this)},n.onShowMessageBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),PanelUserMessage.instance.show(this.data.id)},n.onDeleteBtn=function(t){var e=this;egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),PanelChooseTips.instance.show("确认删除此好友吗？",function(){Api.instance.delete_friend(e.data.id,function(t){1==t.success?(e.btn_delete.label="已删除",e.btn_delete.enabled=!1):PanelTips.instance.show(t.code)})})},e}(eui.ItemRenderer);egret.registerClass(Friends3Item,"Friends3Item");var SceneHistory=function(t){function e(){t.call(this),this.skinName=SceneHistorySkin,this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=HistoryItem,this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){this.getData()},n.getData=function(t){var e=this;void 0===t&&(t=""),""==UserData.Other_UserId?Api.instance.get_history(function(t){1==t.success&&(e._data.source=t.page.list)}):Api.instance.get_otheruserhistory(UserData.Other_UserId,function(t){1==t.success&&(e._data.source=t.page.list)}),this._data.refresh()},n.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.removeTopScene(SceneNames.HISTORY)},e}(basic.SceneBase);egret.registerClass(SceneHistory,"SceneHistory");var HistoryItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),"RETAIL"==this.data.role?this.com_type.currentState="1":"BIGRETAIL"==this.data.role?this.com_type.currentState="2":"MECHANISM"==this.data.role&&(this.com_type.currentState="3"),this.txt_name.text=this.data.auctionName+" 第"+this.data.codenum+"期",void 0==this.data.totalincome?this.txt_shouyi.text="0%":this.txt_shouyi.text=Number(Math.floor(1e3*this.data.totalincome)/10).toString()+"%",void 0==this.data.ujifen?this.txt_jifen.text="0":this.txt_jifen.text=this.data.ujifen,"HUNTERPREY"==this.data.relation?(this.txt_pk.text="--",this.txt_gensui.text="--",this.txt_liesha.text=this.data.victory+"次"):"FOLLOW"==this.data.relation?(this.txt_pk.text="--","FOLLOW"==this.data.victory?this.txt_gensui.text="跟随":this.txt_gensui.text="被跟随",this.txt_liesha.text="--"):"FOLLOWED"==this.data.relation?(this.txt_pk.text="--",this.txt_liesha.text="--",this.txt_gensui.text=this.data.victory):"CHALLENGE"==this.data.relation?("SUCCESS"==this.data.victory?this.txt_pk.text="胜":"TIED"==this.data.victory?this.txt_pk.text="平":"FAIL"==this.data.victory&&(this.txt_pk.text="负"),this.txt_gensui.text="--",this.txt_liesha.text="--"):(this.txt_pk.text="--",this.txt_gensui.text="--",this.txt_liesha.text="--")},e}(eui.ItemRenderer);egret.registerClass(HistoryItem,"HistoryItem");var SceneHuDong1=function(t){function e(){t.call(this),this.page_num=20,this.skinName=SceneHuDong1Skin,this.viewStack.selectedIndex=0,this.btn_type.currentState="up",this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=HuDongItem,this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_type0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeBtn,this),this.btn_type1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTypeBtn,this),this.btn_lingqu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLingQuBtn,this),this.btn_addfriends.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddFriendsBtn,this)}__extends(e,t);
var i=(__define,e),n=i.prototype;return n.beforeShow=function(){var t=this;this.page_now=1,this.txt_tips.visible=!1,Api.instance.get_game_hudong2(this.page_now,this.page_num,function(e){1==e.success&&(void 0==e.page.list?(t._data.source=[],t.txt_tips.visible=!0):t._data.source=e.page.list)}),this._data.refresh()},n.onExitBtn=function(t){egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),basic.SceneManager.removeTopScene(SceneNames.HUDONG1)},n.onLingQuBtn=function(t){var e=this;Api.instance.get_game_lingqutask(function(t){1==t.success?(PanelTips.instance.show("领取成功",function(){basic.SceneManager.removeTopScene(SceneNames.HUDONG1)}),egret.setTimeout(function(){basic.SoundManager.instance.playEffect("task_mp3")},e,100)):PanelTips.instance.show(t.code)})},n.onAddFriendsBtn=function(t){egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),basic.SceneManager.addTopScene(SceneNames.FRIENDS)},n.onTypeBtn=function(t){egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),"1"==t.target.name?(this.viewStack.selectedIndex=1,this.btn_type.currentState="down"):"0"==t.target.name&&(this.viewStack.selectedIndex=0,this.btn_type.currentState="up")},e}(basic.SceneBase);egret.registerClass(SceneHuDong1,"SceneHuDong1");var SceneHuDong2=function(t){function e(){t.call(this),this.page_num=20,this.skinName=SceneHuDong2Skin,this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=HuDongItem,this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){var t=this;this.page_now=1,Api.instance.get_game_hudong2(this.page_now,this.page_num,function(e){1==e.success&&(t._data.source=e.page.list)}),this._data.refresh()},n.onExitBtn=function(t){basic.SceneManager.removeTopScene(SceneNames.HUDONG2)},e}(basic.SceneBase);egret.registerClass(SceneHuDong2,"SceneHuDong2");var HuDongItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.url),this.txt_name.text=this.data.accountname,"RETAIL"==this.data.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==this.data.auctionrole?this.com_type.currentState="2":"MECHANISM"==this.data.auctionrole&&(this.com_type.currentState="3"),1==this.data.isRequestType?(this.btn_gensui.enabled=!1,this.btn_tiaozhan.enabled=!1,"CHALLENGE"==this.data.requestType?(this.btn_gensui.label="更随",this.btn_tiaozhan.label="已挑战"):"FOLLOW"==this.data.requestType&&(this.btn_gensui.label="已请求",this.btn_tiaozhan.label="挑战")):(this.btn_gensui.label="跟随",this.btn_tiaozhan.label="挑战"),this.btn_gensui.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGenSuiBtn,this),this.btn_tiaozhan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTiaoZhanBtn,this)},n.onGenSuiBtn=function(t){var e=this;Api.instance.up_game_gensui(this.data.accountId,function(t){1==t.success?(e.data.isRequestType=1,e.data.requestType="FOLLOW",1==e.data.isRequestType&&(e.btn_gensui.enabled=!1,e.btn_tiaozhan.enabled=!1,"CHALLENGE"==e.data.requestType?(e.btn_gensui.label="跟随",e.btn_tiaozhan.label="已挑战"):"FOLLOW"==e.data.requestType&&(e.btn_gensui.label="已请求",e.btn_tiaozhan.label="挑战")),PanelTips.instance.show("等待对方同意！")):PanelTips.instance.show(t.code)})},n.onTiaoZhanBtn=function(t){var e=this;Api.instance.up_game_tiaozhan(this.data.accountId,function(t){1==t.success?(e.data.isRequestType=1,e.data.requestType="CHALLENGE",1==e.data.isRequestType&&(e.btn_gensui.enabled=!1,e.btn_tiaozhan.enabled=!1,"CHALLENGE"==e.data.requestType?(e.btn_gensui.label="跟随",e.btn_tiaozhan.label="已挑战"):"FOLLOW"==e.data.requestType&&(e.btn_gensui.label="已请求",e.btn_tiaozhan.label="挑战")),PanelTips.instance.show("等待对方同意！")):PanelTips.instance.show(t.code)})},e}(eui.ItemRenderer);egret.registerClass(HuDongItem,"HuDongItem");var SceneHuDongXinXi=function(t){function e(){t.call(this),this.skinName=SceneHuDongXinXiSkin,this.list.dataProvider=this._data=new eui.ArrayCollection,this.list.itemRenderer=HuDongXinXiItem,this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){var t=this;Api.instance.get_game_hudongxinxi(function(e){1==e.success&&(t._data.source=e.list)}),this._data.refresh()},n.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.removeTopScene(SceneNames.HUDONGXINXI)},e}(basic.SceneBase);egret.registerClass(SceneHuDongXinXi,"SceneHuDongXinXi");var HuDongXinXiItem=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.dataChanged=function(){t.prototype.dataChanged.call(this),this.head.show(this.data.url),this.txt_name.text=this.data.accountname,"CHALLENGE"==this.data.requestType?(this.btn_yes.label="接受",this.txt_tips.text="发起挑战",this.btn_yes.icon="icon_btn9_png"):"FOLLOW"==this.data.requestType&&(this.btn_yes.label="同意",this.txt_tips.text="请求跟随",this.btn_yes.icon="icon_btn9_png"),this.btn_no.label="拒绝",this.btn_no.icon="icon_btn8_png","RETAIL"==this.data.auctionrole?this.com_type.currentState="1":"BIGRETAIL"==this.data.auctionrole?this.com_type.currentState="2":"MECHANISM"==this.data.auctionrole&&(this.com_type.currentState="3"),this.btn_no.enabled=!0,this.btn_yes.enabled=!0,this.btn_no.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoBtn,this),this.btn_yes.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesBtn,this)},n.onNoBtn=function(t){var e=this;egret.setTimeout(function(){basic.SoundManager.instance.playEffect("nomal_mp3")},this,100),Api.instance.up_game_nohudong(this.data.accountId,function(t){1==t.success?(e.btn_no.enabled=!1,e.btn_yes.enabled=!1,e.btn_no.label="已拒绝"):PanelTips.instance.show(t.code)})},n.onYesBtn=function(t){var e=this;Api.instance.up_game_starthudong(this.data.requestType,this.data.accountId,function(t){1==t.success?("FOLLOW"==e.data.requestType?(e.btn_no.enabled=!1,e.btn_yes.enabled=!1,e.btn_yes.label="已同意"):"CHALLENGE"==e.data.requestType&&PanelTips.instance.show("接受成功，开始挑战！",function(){basic.SceneManager.removeTopScene(SceneNames.HUDONGXINXI)}),egret.setTimeout(function(){basic.SoundManager.instance.playEffect("interact_mp3")},e,100)):PanelTips.instance.show(t.code)})},e}(eui.ItemRenderer);egret.registerClass(HuDongXinXiItem,"HuDongXinXiItem");var SceneLoading=function(t){function e(){t.call(this),this._tween_rotation=null,this.trun_speed=400,this.skinName=SceneLoadingSkin}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(t){this.txt_progress.text="0%",this._tween_rotation=egret.Tween.get(this.com_loading,{loop:!0}).to({rotation:360},this.trun_speed),basic.Dispatcher.addListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},n.beforeHide=function(t){this._tween_rotation&&(this._tween_rotation.setPaused(!0),this._tween_rotation=null),basic.Dispatcher.removeListener(EventNames.LOADING_PROGRESS,this.onLoadingProgress,this)},n.onLoadingProgress=function(t){var e=t.data.itemsLoaded/t.data.itemsTotal*100;this.txt_progress.text=Math.floor(e).toString()+"%"},e}(basic.SceneBase);egret.registerClass(SceneLoading,"SceneLoading");var ScenePlayRule=function(t){function e(){t.call(this),this.skinName=ScenePlayRuleSkin,this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.onExitBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.removeTopScene(SceneNames.PLAYRULE)},e}(basic.SceneBase);egret.registerClass(ScenePlayRule,"ScenePlayRule");var SceneSendMessage=function(t){function e(){t.call(this),this.send_typedetail=["NEWSMESSAGE","SYSMESSAGE","ACCOUNTMESSAGE"],this.skinName=SceneSendMessageSkin,this.txt_detail.addEventListener(egret.Event.CHANGE,this.onChangeText,this),this.btn_exit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this),this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSendBtn,this),this.rect_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onExitBtn,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){this.txt_title.text=GameData.sendmessage_title,this.txt_tips.text="",this.txt_detail.text="",this.btn_send.enabled=!1},n.onExitBtn=function(t){basic.SceneManager.removeTopScene(SceneNames.SENDMESSAGE)},n.onChangeText=function(t){""==this.txt_detail.text?this.btn_send.enabled=!1:this.btn_send.enabled=!0},n.onSendBtn=function(t){var e=this;this.txt_tips.text="",""!=this.txt_detail.text&&Api.instance.send_message(this.send_typedetail[GameData.sendmessage_type],this.txt_detail.text,function(t){1==t.success?basic.SceneManager.removeTopScene(SceneNames.SENDMESSAGE):e.txt_tips.text=t.code})},e}(basic.SceneBase);egret.registerClass(SceneSendMessage,"SceneSendMessage");var SceneStart=function(t){function e(){t.call(this),this.show_face=0,this.title_name=["竞技","排行","我的"],this.skinName=SenceStartSkin,this.viewStack.selectedIndex=this.show_face,this.btn_about.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAboutBtn,this),basic.Dispatcher.addListener(EventNames.SHOW_STARTTYPE,this.onShowFace,this)}__extends(e,t);var i=(__define,e),n=i.prototype;return n.beforeShow=function(){0==this.show_face?this.main.info():1==this.show_face?this.ranking.info():2==this.show_face&&this.mine.info(),Api.instance.get_friendsnum(function(t){1==t.success&&1==t.data&&basic.Dispatcher.dispatch(EventNames.SHOW_TIPS)})},n.beforeHide=function(){0==this.show_face&&this.main.stop()},n.onShowFace=function(t){0==this.show_face&&this.main.stop(),this.show_face=t.data.type,this.viewStack.selectedIndex=t.data.type,this.txt_title.text=this.title_name[t.data.type],0==this.show_face?this.main.info():1==this.show_face?this.ranking.info():2==this.show_face&&this.mine.info()},n.onAboutBtn=function(t){basic.SoundManager.instance.playEffect("nomal_mp3"),basic.SceneManager.addTopScene(SceneNames.PLAYRULE)},e}(basic.SceneBase);egret.registerClass(SceneStart,"SceneStart");